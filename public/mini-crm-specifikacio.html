<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PipeLiT - Teljes Rendszer Specifik√°ci√≥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
            padding: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        h2 {
            color: #2c3e50;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-left: 5px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        h4 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th {
            background-color: #3498db;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #ddd;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #e8f4f8;
        }
        
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        
        .status-box {
            display: inline-block;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            width: 100%;
        }
        
        .implemented {
            background-color: #d4edda;
            border-left: 5px solid #28a745;
        }
        
        .not-implemented {
            background-color: #f8d7da;
            border-left: 5px solid #dc3545;
        }
        
        .partial {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
        }
        
        .status-icon {
            font-size: 1.2em;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .green { color: #28a745; }
        .red { color: #dc3545; }
        .orange { color: #ffc107; }
        
        .info-box {
            background-color: #e7f3ff;
            border-left: 5px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .warning-box {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .section {
            page-break-inside: avoid;
        }
        
        @media print {
            body {
                padding: 20px;
            }
            
            .status-box {
                page-break-inside: avoid;
            }
        }
        
        .feature-list {
            list-style: none;
            margin-left: 0;
        }
        
        .feature-list li {
            padding-left: 30px;
            position: relative;
        }
        
        .feature-list li::before {
            position: absolute;
            left: 0;
            font-size: 1.2em;
        }
        
        .feature-list li.done::before {
            content: "‚úì";
            color: #28a745;
        }
        
        .feature-list li.missing::before {
            content: "‚úó";
            color: #dc3545;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .tech-item strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 5px;
        }
        
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>üöÄ PipeLiT - Teljes Rendszer Specifik√°ci√≥</h1>
    
    <div class="info-box">
        <strong>Dokumentum inform√°ci√≥k:</strong><br>
        Verzi√≥: 2.0<br>
        Utols√≥ friss√≠t√©s: 2025-12-08<br>
        Projekt t√≠pus: CRM rendszer feladatkezel√©ssel, projektmenedzsmenttel √©s automatiz√°ci√≥val<br>
        Technol√≥gia: React + TypeScript + Lovable Cloud (Supabase)
    </div>

    <div class="toc">
        <h3>üìë Tartalomjegyz√©k</h3>
        <ol>
            <li><a href="#overview">Rendszer √Åttekint√©s</a></li>
            <li><a href="#database">Adatb√°zis Strukt√∫ra</a></li>
            <li><a href="#auth">Jogosults√°gi Modell</a></li>
            <li><a href="#security">Autentik√°ci√≥ √©s Biztons√°g</a></li>
            <li><a href="#license">Licenckezel√©s</a></li>
            <li><a href="#edge-functions">Edge Functions</a></li>
            <li><a href="#modules">Funkcion√°lis Modulok</a></li>
            <li><a href="#frontend">Frontend Strukt√∫ra</a></li>
            <li><a href="#i18n">Nemzetk√∂zies√≠t√©s</a></li>
            <li><a href="#summary">√ñsszefoglal√°s</a></li>
        </ol>
    </div>

    <div class="section" id="overview">
        <h2>1. RENDSZER √ÅTTEKINT√âS</h2>
        
        <h3>1.1. Technol√≥giai Stack</h3>
        <div class="tech-stack">
            <div class="tech-item">
                <strong>Frontend</strong>
                React 18 + TypeScript + Vite
            </div>
            <div class="tech-item">
                <strong>UI Framework</strong>
                Tailwind CSS + shadcn/ui
            </div>
            <div class="tech-item">
                <strong>Backend</strong>
                Lovable Cloud (Supabase)
            </div>
            <div class="tech-item">
                <strong>Adatb√°zis</strong>
                PostgreSQL (Supabase)
            </div>
            <div class="tech-item">
                <strong>Autentik√°ci√≥</strong>
                Supabase Auth + TOTP 2FA
            </div>
            <div class="tech-item">
                <strong>Edge Functions</strong>
                Deno Runtime
            </div>
            <div class="tech-item">
                <strong>Nyelvi T√°mogat√°s</strong>
                i18next (magyar, angol)
            </div>
            <div class="tech-item">
                <strong>Email</strong>
                Resend HTTP API
            </div>
        </div>
        
        <h3>1.2. F≈ë Modulok</h3>
        <ul class="feature-list">
            <li class="done">Felhaszn√°l√≥- √©s jogosults√°gkezel√©s</li>
            <li class="done">V√°llalatkezel√©s + licencrendszer</li>
            <li class="done">Partnerkezel√©s (kapcsolattart√≥k, c√≠mek, korl√°toz√°sok)</li>
            <li class="done">√ârt√©kes√≠t√©sek (Sales pipeline)</li>
            <li class="done">Projektmenedzsment (Kanban, Gantt)</li>
            <li class="done">Feladatkezel√©s (ism√©tl≈ëd≈ë feladatok)</li>
            <li class="done">Esem√©nykezel√©s (napt√°r integr√°ci√≥)</li>
            <li class="done">Szerz≈ëd√©skezel√©s (verzi√≥z√°s, lej√°rat figyelmeztet√©s)</li>
            <li class="done">Dokumentumkezel√©s (multi-file, PDF el≈ën√©zet)</li>
            <li class="done">Id≈ëk√∂vet√©s (Time Tracking)</li>
            <li class="done">J√≥v√°hagy√°si workflow</li>
            <li class="done">Automatiz√°ci√≥ (szab√°lyok, triggerek)</li>
            <li class="done">Dashboard (testreszabhat√≥ widgetek)</li>
            <li class="done">Napt√°r (nap/h√©t/h√≥nap n√©zet, drag-drop)</li>
            <li class="done">√ârtes√≠t√©sek (real-time)</li>
            <li class="done">T√∂rzsadatok (Master Data)</li>
            <li class="done">Napl√≥z√°s (Audit Logs)</li>
            <li class="done">Rendszerbe√°ll√≠t√°sok</li>
            <li class="done">Riportok √©s export (PDF, Excel, CSV)</li>
            <li class="done">Glob√°lis keres√©s</li>
            <li class="done">Kedvencek √©s c√≠mk√©k</li>
        </ul>
    </div>

    <div class="section" id="database">
        <h2>2. ADATB√ÅZIS STRUKT√öRA</h2>
        
        <h3>2.1. Felhaszn√°l√≥k √©s Autentik√°ci√≥</h3>
        
        <h4>profiles (felhaszn√°l√≥i profilok)</h4>
        <table>
            <thead>
                <tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr>
            </thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>‚Üí auth.users</td></tr>
                <tr><td>email</td><td>text</td><td>Email c√≠m</td></tr>
                <tr><td>full_name, given_name, family_name</td><td>text</td><td>N√©v adatok</td></tr>
                <tr><td>user_code</td><td>text</td><td>Regisztr√°ci√≥s k√≥d (8 karakter)</td></tr>
                <tr><td>role</td><td>user_role ENUM</td><td>super_admin, admin, normal, viewer</td></tr>
                <tr><td>is_active</td><td>boolean</td><td>Akt√≠v st√°tusz</td></tr>
                <tr><td>language</td><td>text</td><td>en/hu</td></tr>
                <tr><td>default_company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>must_change_password</td><td>boolean</td><td>K√∂telez≈ë jelsz√≥v√°ltoztat√°s</td></tr>
                <tr><td>password_changed_at</td><td>timestamptz</td><td>Jelsz√≥ utols√≥ m√≥dos√≠t√°s (90 napos lej√°rat)</td></tr>
                <tr><td>can_delete, can_view_logs</td><td>boolean</td><td>Glob√°lis jogosults√°gok</td></tr>
                <tr><td>two_factor_enabled</td><td>boolean</td><td>2FA bekapcsolva</td></tr>
                <tr><td>two_factor_secret</td><td>text</td><td>TOTP titkos kulcs</td></tr>
                <tr><td>personal_task_color, personal_event_color</td><td>text</td><td>Szem√©lyes sz√≠nek napt√°rban</td></tr>
                <tr><td>invitation_sent_at, invitation_expires_at</td><td>timestamptz</td><td>Megh√≠v√≥ √°llapot</td></tr>
                <tr><td>registered_at</td><td>timestamptz</td><td>Regisztr√°ci√≥ befejez√©se</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Id≈ëb√©lyegz≈ëk</td></tr>
            </tbody>
        </table>

        <h4>login_attempts (bejelentkez√©si k√≠s√©rletek)</h4>
        <p>Biztons√°gos r√∂gz√≠t√©s: <code>record_login_attempt()</code> RPC f√ºggv√©nyen kereszt√ºl, rate limiting-gel (max 10 sikertelen/perc/IP).</p>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>email</td><td>text</td><td>Email c√≠m</td></tr>
                <tr><td>user_id</td><td>uuid (nullable)</td><td>‚Üí auth.users</td></tr>
                <tr><td>success</td><td>boolean</td><td>Sikeres-e</td></tr>
                <tr><td>attempt_time</td><td>timestamptz</td><td>K√≠s√©rlet id≈ëpontja</td></tr>
                <tr><td>ip_address, user_agent</td><td>text</td><td>Kliens inform√°ci√≥k</td></tr>
            </tbody>
        </table>

        <h4>locked_accounts (z√°rolt fi√≥kok)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>user_id</td><td>uuid (FK)</td><td>‚Üí auth.users</td></tr>
                <tr><td>locked_at</td><td>timestamptz</td><td>Z√°rol√°s id≈ëpontja</td></tr>
                <tr><td>locked_until</td><td>timestamptz (nullable)</td><td>Z√°rol√°s v√©ge (NULL = permanent)</td></tr>
                <tr><td>locked_by_system</td><td>boolean</td><td>Automatikus z√°rol√°s-e</td></tr>
                <tr><td>unlocked_at</td><td>timestamptz</td><td>Felold√°s id≈ëpontja</td></tr>
                <tr><td>unlocked_by</td><td>uuid (FK)</td><td>‚Üí profiles (ki oldotta fel)</td></tr>
                <tr><td>reason</td><td>text</td><td>Z√°rol√°s oka</td></tr>
            </tbody>
        </table>

        <h3>2.2. V√°llalatok √©s Jogosults√°gok</h3>

        <h4>companies (v√°llalatok)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>name</td><td>text</td><td>V√°llalat neve</td></tr>
                <tr><td>tax_id</td><td>text</td><td>Ad√≥sz√°m (√©rz√©keny adat - companies_safe view)</td></tr>
                <tr><td>address</td><td>text</td><td>C√≠m</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Id≈ëb√©lyegz≈ëk</td></tr>
            </tbody>
        </table>

        <h4>company_licenses (licencek)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK, UNIQUE)</td><td>‚Üí companies</td></tr>
                <tr><td>license_key</td><td>text</td><td>Titkos√≠tott kulcs (12-bit nonce)</td></tr>
                <tr><td>max_users</td><td>integer</td><td>Licencelt felhaszn√°l√≥k sz√°ma</td></tr>
                <tr><td>valid_from, valid_until</td><td>timestamptz</td><td>√ârv√©nyess√©gi id≈ëszak</td></tr>
                <tr><td>is_active</td><td>boolean</td><td>Akt√≠v st√°tusz</td></tr>
                <tr><td>features</td><td>jsonb</td><td>["partners", "projects", "sales", "documents", "calendar", "my_items", "audit"]</td></tr>
            </tbody>
        </table>

        <h4>user_companies + user_company_permissions</h4>
        <p>Felhaszn√°l√≥-v√°llalat √∂sszerendel√©s √©s v√°llalatonk√©nti jogosults√°gok (ADMIN, NORMAL, VIEWER szerepk√∂r√∂k).</p>

        <h3>2.3. √úzleti Entit√°sok</h3>

        <h4>partners (partnerek)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies (v√°llalat scope)</td></tr>
                <tr><td>name</td><td>text</td><td>Partner neve</td></tr>
                <tr><td>tax_id</td><td>text</td><td>Magyar ad√≥sz√°m (xxxxxxxx-x-xx valid√°ci√≥val)</td></tr>
                <tr><td>eu_vat_number</td><td>text</td><td>EU √ÅFA sz√°m</td></tr>
                <tr><td>default_currency</td><td>text</td><td>Alap√©rtelmezett deviza</td></tr>
                <tr><td>category</td><td>text</td><td>master_data ref</td></tr>
                <tr><td>restrict_access</td><td>boolean</td><td>Korl√°tozott hozz√°f√©r√©s (partner_user_access)</td></tr>
                <tr><td>parent_partner_id</td><td>uuid (FK)</td><td>Sz√ºl≈ë partner (anya-le√°ny funkci√≥ ELT√ÅVOL√çTVA, mez≈ë megmaradt)</td></tr>
                <tr><td>notes</td><td>text</td><td>Megjegyz√©sek</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Id≈ëb√©lyegz≈ëk</td></tr>
            </tbody>
        </table>

        <h4>partner_addresses (partner c√≠mek)</h4>
        <p>H√°romszint≈± c√≠mrendszer: headquarters (sz√©khely), site (telephely), mailing (levelez√©si).</p>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>‚Üí partners</td></tr>
                <tr><td>address_type</td><td>text</td><td>headquarters, site, mailing</td></tr>
                <tr><td>postal_code, city, county, country</td><td>text</td><td>C√≠m komponensek</td></tr>
                <tr><td>street_name, street_type, house_number</td><td>text</td><td>Utca adatok</td></tr>
                <tr><td>building, staircase, floor_door</td><td>text</td><td>√âp√ºlet r√©szletek</td></tr>
            </tbody>
        </table>

        <h4>partner_contacts (kapcsolattart√≥k)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>‚Üí partners</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>name</td><td>text</td><td>Kapcsolattart√≥ neve</td></tr>
                <tr><td>position</td><td>text</td><td>Poz√≠ci√≥</td></tr>
                <tr><td>email, phone</td><td>text</td><td>El√©rhet≈ës√©gek</td></tr>
                <tr><td>is_primary</td><td>boolean</td><td>Els≈ëdleges kapcsolat</td></tr>
                <tr><td>notes</td><td>text</td><td>Megjegyz√©sek</td></tr>
            </tbody>
        </table>

        <h4>projects (projektek)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>code</td><td>text</td><td>Projekt azonos√≠t√≥</td></tr>
                <tr><td>name</td><td>text</td><td>Projekt neve</td></tr>
                <tr><td>description</td><td>text</td><td>Le√≠r√°s</td></tr>
                <tr><td>status</td><td>text</td><td>master_data ref</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>‚Üí partners</td></tr>
                <tr><td>owner_user_id</td><td>uuid (FK)</td><td>‚Üí profiles (tulajdonos)</td></tr>
                <tr><td>responsible1_user_id, responsible2_user_id</td><td>uuid (FK)</td><td>‚Üí profiles (felel≈ës√∂k)</td></tr>
                <tr><td>task_color, event_color</td><td>text</td><td>Projekt sz√≠nek napt√°rban</td></tr>
            </tbody>
        </table>

        <h4>tasks (feladatok)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>project_id</td><td>uuid (FK, nullable)</td><td>‚Üí projects</td></tr>
                <tr><td>sales_id</td><td>uuid (FK, nullable)</td><td>‚Üí sales</td></tr>
                <tr><td>partner_id</td><td>uuid (FK, nullable)</td><td>‚Üí partners</td></tr>
                <tr><td>title</td><td>text</td><td>Feladat c√≠me</td></tr>
                <tr><td>description</td><td>text</td><td>Le√≠r√°s</td></tr>
                <tr><td>status</td><td>text</td><td>master_data ref</td></tr>
                <tr><td>responsible_user_id</td><td>uuid (FK)</td><td>‚Üí profiles (felel≈ës)</td></tr>
                <tr><td>created_by</td><td>uuid (FK)</td><td>‚Üí profiles (l√©trehoz√≥)</td></tr>
                <tr><td>deadline</td><td>timestamptz</td><td>Hat√°rid≈ë (k√∂telez≈ë)</td></tr>
                <tr><td>is_all_day</td><td>boolean</td><td>Eg√©sz napos feladat</td></tr>
                <tr><td>recurrence_type</td><td>text</td><td>none, daily, weekly, monthly, yearly</td></tr>
                <tr><td>recurrence_interval</td><td>integer</td><td>Ism√©tl≈ëd√©s gyakoris√°g</td></tr>
                <tr><td>recurrence_end_date</td><td>date</td><td>Ism√©tl≈ëd√©s v√©ge</td></tr>
                <tr><td>parent_task_id, occurrence_date</td><td>uuid/date</td><td>Virtu√°lis el≈ëfordul√°sokhoz</td></tr>
            </tbody>
        </table>

        <h4>events (esem√©nyek)</h4>
        <p>K√ºl√∂n t√°bla feladatokt√≥l, r√©sztvev≈ëkkel (event_participants - bels≈ë √©s k√ºls≈ë email megh√≠v√≥k).</p>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>title</td><td>text</td><td>Esem√©ny c√≠me</td></tr>
                <tr><td>start_time, end_time</td><td>timestamptz</td><td>Id≈ëpontok</td></tr>
                <tr><td>is_all_day</td><td>boolean</td><td>Eg√©sz napos esem√©ny</td></tr>
                <tr><td>location</td><td>text</td><td>Helysz√≠n</td></tr>
                <tr><td>description</td><td>text</td><td>Le√≠r√°s</td></tr>
                <tr><td>project_id, sales_id, partner_id</td><td>uuid (FK, nullable)</td><td>Kapcsol√≥d√≥ entit√°sok</td></tr>
                <tr><td>responsible_user_id</td><td>uuid (FK)</td><td>Felel≈ës</td></tr>
                <tr><td>created_by</td><td>uuid (FK)</td><td>L√©trehoz√≥</td></tr>
                <tr><td>recurrence_type, recurrence_interval, recurrence_end_date</td><td>mixed</td><td>Ism√©tl≈ëd√©s be√°ll√≠t√°sok</td></tr>
            </tbody>
        </table>

        <h4>contracts (szerz≈ëd√©sek)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>owner_company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>title, contract_number</td><td>text</td><td>C√≠m √©s azonos√≠t√≥</td></tr>
                <tr><td>contract_type</td><td>text</td><td>master_data ref</td></tr>
                <tr><td>partner_id, project_id, sales_id</td><td>uuid (FK, nullable)</td><td>Kapcsol√≥d√≥ entit√°sok</td></tr>
                <tr><td>status</td><td>text</td><td>draft, active, expired, terminated</td></tr>
                <tr><td>signed_date, effective_date, expiry_date</td><td>date</td><td>D√°tumok</td></tr>
                <tr><td>total_value, currency</td><td>numeric/text</td><td>√ñsszeg √©s deviza</td></tr>
                <tr><td>payment_frequency, payment_day</td><td>text/integer</td><td>Fizet√©si √ºtemez√©s</td></tr>
                <tr><td>auto_renewal, renewal_period_months</td><td>boolean/integer</td><td>Automatikus meg√∫j√≠t√°s</td></tr>
                <tr><td>termination_notice_days</td><td>integer</td><td>Felmond√°si id≈ë</td></tr>
                <tr><td>expiry_warning_days, renewal_warning_days, termination_warning_days</td><td>integer</td><td>Figyelmeztet√©si napok</td></tr>
                <tr><td>restrict_access</td><td>boolean</td><td>Korl√°tozott hozz√°f√©r√©s</td></tr>
            </tbody>
        </table>

        <h4>contract_versions (szerz≈ëd√©s verzi√≥k)</h4>
        <p>Teljes verzi√≥k√∂vet√©s: minden m√≥dos√≠t√°s √∫j verzi√≥, vissza√°ll√≠t√°si lehet≈ës√©g (admin only).</p>

        <h4>documents + document_files</h4>
        <p>Dokumentum metaadat + multi-file t√°mogat√°s (t√∂bb f√°jl/dokumentum, verzi√≥k√∂vet√©s, PDF el≈ën√©zet).</p>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>owner_company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>title, description</td><td>text</td><td>C√≠m √©s le√≠r√°s</td></tr>
                <tr><td>visibility</td><td>text</td><td>COMPANY_ONLY, PROJECT_ONLY, SALES_ONLY, PUBLIC</td></tr>
                <tr><td>partner_id, project_id, sales_id</td><td>uuid (FK, nullable)</td><td>Kapcsol√≥d√≥ entit√°sok</td></tr>
            </tbody>
        </table>

        <h4>time_entries (id≈ëbejegyz√©sek)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>user_id</td><td>uuid (FK)</td><td>‚Üí profiles</td></tr>
                <tr><td>task_id</td><td>uuid (FK)</td><td>‚Üí tasks (k√∂telez≈ë)</td></tr>
                <tr><td>description</td><td>text</td><td>Le√≠r√°s</td></tr>
                <tr><td>start_time, end_time</td><td>timestamptz</td><td>Id≈ëpontok</td></tr>
                <tr><td>duration_minutes</td><td>integer</td><td>Id≈ëtartam percben (sz√°m√≠tott)</td></tr>
                <tr><td>is_running</td><td>boolean</td><td>Akt√≠v timer (egy akt√≠v/felhaszn√°l√≥)</td></tr>
            </tbody>
        </table>

        <h4>approval_workflows (j√≥v√°hagy√°si folyamatok)</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>entity_type</td><td>text</td><td>contract, document, project</td></tr>
                <tr><td>entity_id</td><td>uuid</td><td>Entit√°s azonos√≠t√≥</td></tr>
                <tr><td>status</td><td>text</td><td>pending, approved, rejected</td></tr>
                <tr><td>requested_by</td><td>uuid (FK)</td><td>‚Üí profiles (k√©relmez≈ë)</td></tr>
                <tr><td>approved_by</td><td>uuid (FK, nullable)</td><td>‚Üí profiles (j√≥v√°hagy√≥)</td></tr>
                <tr><td>approved_at</td><td>timestamptz</td><td>J√≥v√°hagy√°s id≈ëpontja</td></tr>
                <tr><td>rejection_reason</td><td>text</td><td>Elutas√≠t√°s oka</td></tr>
                <tr><td>notes</td><td>text</td><td>Megjegyz√©sek</td></tr>
            </tbody>
        </table>

        <h4>automation_rules + automation_logs</h4>
        <table>
            <thead><tr><th>Mez≈ë</th><th>T√≠pus</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>Els≈ëdleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>‚Üí companies</td></tr>
                <tr><td>name, description</td><td>text</td><td>N√©v √©s le√≠r√°s</td></tr>
                <tr><td>trigger_type</td><td>text</td><td>task_status_change, task_created, deadline_approaching, project_status_change, sales_status_change, contract_expiring</td></tr>
                <tr><td>trigger_config</td><td>jsonb</td><td>Trigger be√°ll√≠t√°sok</td></tr>
                <tr><td>action_type</td><td>text</td><td>send_notification, change_status, assign_user, create_task, send_email</td></tr>
                <tr><td>action_config</td><td>jsonb</td><td>Akci√≥ be√°ll√≠t√°sok</td></tr>
                <tr><td>is_active</td><td>boolean</td><td>Akt√≠v-e</td></tr>
            </tbody>
        </table>

        <h3>2.4. Rendszer T√°bl√°k</h3>

        <h4>notifications (√©rtes√≠t√©sek)</h4>
        <p>Real-time √©rtes√≠t√©sek Supabase Realtime-mal. T√≠pusok: task, deadline, automation, approval.</p>

        <h4>favorites (kedvencek)</h4>
        <p>Felhaszn√°l√≥nk√©nti kedvencek projektek, √©rt√©kes√≠t√©sek, szerz≈ëd√©sek, partnerek, dokumentumokhoz.</p>

        <h4>tags + entity_tags (c√≠mk√©k)</h4>
        <p>V√°llalat-szint≈± c√≠mk√©k tetsz≈ëleges entit√°sokhoz, sz√≠nk√≥dol√°ssal.</p>

        <h4>comments (megjegyz√©sek)</h4>
        <p>Entit√°sokhoz f≈±z√∂tt megjegyz√©sek (entity_type, entity_id). Szerkeszt√©s √©s soft delete csak szerz≈ë √°ltal - soft_delete_comment() SECURITY DEFINER RPC-n kereszt√ºl.</p>

        <h4>dashboard_widgets (dashboard testreszab√°s)</h4>
        <p>Felhaszn√°l√≥nk√©nti widget l√°that√≥s√°g, poz√≠ci√≥ √©s sz√©less√©g be√°ll√≠t√°sok.</p>

        <h4>master_data (t√∂rzsadatok)</h4>
        <p>Dinamikus t√≠pusok men√º kateg√≥ri√°kba rendezve (Settings > T√∂rzsadatok):</p>
        <ul>
            <li><strong>Partnerek:</strong> partner_category</li>
            <li><strong>Projektek:</strong> project_status</li>
            <li><strong>√ârt√©kes√≠t√©s:</strong> sale_status</li>
            <li><strong>Szerz≈ëd√©sek:</strong> contract_type, payment_frequency</li>
            <li><strong>Feladatok:</strong> task_status</li>
            <li><strong>Egy√©b:</strong> currency, cost_category, country, county, street_type</li>
        </ul>

        <h4>postal_codes (~4000 rekord)</h4>
        <p>Magyar ir√°ny√≠t√≥sz√°mok, telep√ºl√©sek, megy√©k a c√≠m kit√∂lt√©shez. Budapest eset√©n megye = "-" automatikusan.</p>

        <h4>system_settings (rendszerbe√°ll√≠t√°sok)</h4>
        <div class="info-box">
            <strong>Kulcs be√°ll√≠t√°sok:</strong><br>
            ‚Ä¢ <code>account_lock_attempts = 5</code><br>
            ‚Ä¢ <code>account_lock_auto_unlock_minutes = 1</code><br>
            ‚Ä¢ <code>account_lock_failed_attempts_window_minutes = 1</code><br>
            ‚Ä¢ <code>two_factor_session_duration_minutes = 720</code><br>
            ‚Ä¢ <code>password_expiry_days = 90</code><br>
            ‚Ä¢ <code>inactivity_logout_minutes = 5</code><br>
            ‚Ä¢ <code>use_browser_locale = true</code><br>
            ‚Ä¢ <code>thousand_separator, decimal_separator</code><br>
            ‚Ä¢ Email be√°ll√≠t√°sok: resend_api_key, email_from_address, email_from_name, notification togglek
        </div>

        <h4>logs (audit napl√≥)</h4>
        <p>Minden entit√°s m≈±velet napl√≥z√°sa: create, update, delete + el≈ëz≈ë/√∫j √©rt√©kek JSON-ban.</p>
    </div>

    <div class="section" id="auth">
        <h2>3. JOGOSULTS√ÅGI MODELL</h2>

        <h3>3.1. Glob√°lis Szerepk√∂r√∂k (profiles.role)</h3>

        <div class="status-box implemented">
            <span class="status-icon green">‚úì</span>
            <strong>super_admin:</strong><br>
            ‚Ä¢ Teljes hozz√°f√©r√©s minden v√°llalathoz √©s funkci√≥hoz<br>
            ‚Ä¢ Felhaszn√°l√≥k l√©trehoz√°sa/t√∂rl√©se<br>
            ‚Ä¢ Rendszerbe√°ll√≠t√°sok m√≥dos√≠t√°sa<br>
            ‚Ä¢ V√°llalatok √©s licencek kezel√©se<br>
            ‚Ä¢ Audit log megtekint√©se<br>
            ‚Ä¢ Z√°rolt fi√≥kok felold√°sa<br>
            ‚Ä¢ Active sessions kezel√©se (kick out)<br>
            ‚Ä¢ Resend API kulcs megtekint√©se<br>
            ‚Ä¢ Licenc gener√°tor haszn√°lata
        </div>

        <div class="status-box implemented">
            <span class="status-icon green">‚úì</span>
            <strong>admin:</strong><br>
            ‚Ä¢ Hozz√°f√©r√©s a saj√°t v√°llalataihoz (user_companies)<br>
            ‚Ä¢ V√°llalatspecifikus jogosults√°gok (user_company_permissions)<br>
            ‚Ä¢ Licenc limitek betart√°sa<br>
            ‚Ä¢ J√≥v√°hagy√°si k√©relmek kezel√©se
        </div>

        <div class="status-box implemented">
            <span class="status-icon green">‚úì</span>
            <strong>normal:</strong><br>
            ‚Ä¢ Alap√©rtelmezett felhaszn√°l√≥<br>
            ‚Ä¢ V√°llalatspecifikus jogosults√°gok szerint<br>
            ‚Ä¢ Csak saj√°t profil l√°that√≥ (strict privacy model)<br>
            ‚Ä¢ Csak Super Adminok √©s Company Adminok rendelhetnek feladatokat/projekteket m√°s felhaszn√°l√≥khoz
        </div>

        <div class="status-box implemented">
            <span class="status-icon green">‚úì</span>
            <strong>viewer:</strong><br>
            ‚Ä¢ Csak olvas√°si jog<br>
            ‚Ä¢ Nem sz√°m√≠t bele a licenc seat limitbe
        </div>

        <h3>3.2. V√°llalat Szerepk√∂r√∂k (user_company_permissions.role)</h3>

        <table>
            <thead><tr><th>Szerepk√∂r</th><th>Jogosults√°gok</th></tr></thead>
            <tbody>
                <tr><td><strong>ADMIN</strong></td><td>V√°llalaton bel√ºl minden adat kezel√©se, felhaszn√°l√≥k hozz√°rendel√©se, t√∂rzsadat szerkeszt√©s (can_edit_master_data), j√≥v√°hagy√°sok</td></tr>
                <tr><td><strong>NORMAL</strong></td><td>Saj√°t adatok + hozz√°rendelt entit√°sok kezel√©se, can_delete flag szerint t√∂rl√©si jog</td></tr>
                <tr><td><strong>VIEWER</strong></td><td>Csak olvas√°s, nem haszn√°l seat-et a licencb≈ël</td></tr>
            </tbody>
        </table>

        <h3>3.3. Speci√°lis Jogosults√°gok</h3>
        <ul>
            <li><strong>can_delete:</strong> Soft delete m≈±velet enged√©lyez√©se</li>
            <li><strong>can_view_logs:</strong> Audit napl√≥ megtekint√©se</li>
            <li><strong>can_edit_master_data:</strong> T√∂rzsadatok szerkeszt√©se</li>
        </ul>

        <h3>3.4. Row Level Security (RLS)</h3>

        <div class="info-box">
            <strong>Minden v√©dett t√°bla RLS pattern:</strong>
            <pre>-- SELECT policy
USING (
  is_super_admin(auth.uid()) 
  OR 
  (
    company_id IN (
      SELECT company_id 
      FROM user_companies 
      WHERE user_id = auth.uid()
    )
    AND is_2fa_verified(auth.uid())
  )
)</pre>
        </div>

        <p><strong>Fontos RLS seg√©df√ºggv√©nyek:</strong></p>
        <ul>
            <li><code>is_super_admin(uid)</code> - Super admin ellen≈ërz√©s</li>
            <li><code>is_admin_or_above(uid)</code> - Admin vagy magasabb</li>
            <li><code>is_2fa_verified(uid)</code> - 2FA session ellen≈ërz√©s</li>
            <li><code>can_view_company_sensitive_data()</code> - √ârz√©keny adatok (ad√≥sz√°m) v√©delme</li>
        </ul>
    </div>

    <div class="section" id="security">
        <h2>4. AUTENTIK√ÅCI√ì √âS BIZTONS√ÅG</h2>

        <h3>4.1. Login Flow</h3>
        <ol>
            <li><strong>Email + Password</strong> ‚Üí Supabase Auth</li>
            <li><strong>Single Session Enforcement:</strong> Bejelentkez√©skor minden kor√°bbi session lez√°r√°sra ker√ºl (<code>signOut({ scope: 'others' })</code>)</li>
            <li><strong>Ha 2FA enabled:</strong>
                <ul>
                    <li>RLS blokkolja az adatokat (<code>is_2fa_verified = false</code>)</li>
                    <li>2FA dialog megjelenik</li>
                    <li>User be√≠rja a TOTP vagy recovery k√≥dot</li>
                    <li><code>verify-2fa-token</code> edge function valid√°l</li>
                    <li>Sikeres valid√°ci√≥ ‚Üí <code>session_2fa_verifications</code> √≠r√°s</li>
                </ul>
            </li>
            <li><strong>Jelsz√≥ lej√°rat ellen≈ërz√©s:</strong> 90 napos lej√°rat, k√∂telez≈ë jelsz√≥v√°ltoztat√°s ha lej√°rt</li>
            <li><strong>Inaktivit√°s logout:</strong> Konfigur√°lhat√≥ timeout (default 5 perc)</li>
        </ol>

        <h3>4.2. Account Lockout</h3>
        <div class="status-box implemented">
            <span class="status-icon green">‚úì</span>
            <strong>Mechanizmus:</strong><br>
            ‚Ä¢ <code>account_lock_attempts</code> (default 5) sikertelen login ‚Üí lock<br>
            ‚Ä¢ <code>account_lock_failed_attempts_window_minutes</code> (1 perc) id≈ëablakban<br>
            ‚Ä¢ Lock id≈ëtartam: <code>account_lock_auto_unlock_minutes</code> (1 perc)<br>
            ‚Ä¢ Automatikus felold√°s lej√°rat ut√°n<br>
            ‚Ä¢ Manu√°lis felold√°s Super Admin √°ltal<br>
            ‚Ä¢ Sikeres login t√∂rli a sikertelen pr√≥b√°lkoz√°sok sz√°m√°t<br>
            ‚Ä¢ Email √©rtes√≠t√©s z√°rol√°skor (Resend API)
        </div>

        <h3>4.3. Regisztr√°ci√≥</h3>
        <ol>
            <li>Super Admin l√©trehozza a felhaszn√°l√≥t (email, vezet√©kn√©v, keresztn√©v)</li>
            <li><strong>K√©t gomb:</strong> "Ment√©s" (csak l√©trehoz) VAGY "Ment√©s √©s k√≥d k√ºld√©se" (l√©trehoz + megh√≠v√≥)</li>
            <li>"Regisztr√°ci√≥s k√≥d k√ºld√©se" ‚Üí 8 karakteres k√≥d gener√°l√°s + email k√ºld√©s (24 √≥ra √©rv√©nyess√©g)</li>
            <li><strong>√öjrak√ºld√©skor:</strong> √öJ k√≥d gener√°l√≥dik (nem ugyanaz)</li>
            <li>Felhaszn√°l√≥ a linkr≈ël regisztr√°l: email (readonly) + n√©v (readonly, SA √°ltal be√°ll√≠tott) + k√≥d + jelsz√≥ (2x)</li>
            <li>Jelsz√≥ komplexit√°s: min 8 karakter, nagy/kisbet≈±, sz√°m, speci√°lis karakter</li>
            <li>Pwned password ellen≈ërz√©s (Supabase Auth)</li>
            <li>K√≥d valid√°ci√≥ backend-en (pontosan egyezni kell)</li>
            <li>Sikeres regisztr√°ci√≥ ‚Üí <code>registered_at</code> timestamp</li>
            <li><strong>Regisztr√°ci√≥s st√°tusz jelz≈ëk:</strong> √≥ra ikon (nem k√ºld√∂tt), bor√≠t√©k ikon (k√ºld√∂tt), pipa ikon (regisztr√°lt)</li>
        </ol>

        <h3>4.4. Session Kezel√©s</h3>
        <ul>
            <li><strong>Active Sessions oldal:</strong> Super Admin l√°tja az akt√≠v session√∂ket (inaktivit√°s timeout-on bel√ºl)</li>
            <li><strong>Session termination:</strong> Realtime broadcast azonnali kijelentkeztet√©s</li>
            <li><strong>User t√∂rl√©skor:</strong> Minden session automatikus lez√°r√°s + kapcsol√≥d√≥ adatok t√∂rl√©se</li>
        </ul>

        <h3>4.5. 2FA (Two-Factor Authentication)</h3>
        <ul>
            <li>TOTP standard (otpauth library)</li>
            <li>QR k√≥d gener√°l√°s (qrcode library)</li>
            <li>Recovery codes (10 db, SHA-256 hash t√°rol√°s)</li>
            <li>Session duration konfigur√°lhat√≥ (default 720 perc = 12 √≥ra)</li>
            <li>Rate limiting: max 10 pr√≥ba / 10 perc, ut√°na 10 perc lock</li>
        </ul>
    </div>

    <div class="section" id="license">
        <h2>5. LICENCKEZEL√âS</h2>

        <h3>5.1. Licenc Strukt√∫ra</h3>
        <ul>
            <li><strong>Max users:</strong> Licencelt felhaszn√°l√≥k sz√°ma (VIEWER nem sz√°m√≠t)</li>
            <li><strong>Valid from/until:</strong> √ârv√©nyess√©gi id≈ëszak</li>
            <li><strong>Features:</strong> Enged√©lyezett funkci√≥k list√°ja (7 feature)</li>
            <li><strong>License key:</strong> Titkos√≠tott kulcs 12-bit nonce-szal (nem determinisztikus)</li>
        </ul>

        <h3>5.2. Feature Mapping</h3>
        <table>
            <thead><tr><th>Men√ºpont</th><th>Feature n√©v</th><th>Bit</th></tr></thead>
            <tbody>
                <tr><td>Partnerek</td><td>partners</td><td>0</td></tr>
                <tr><td>Projektek</td><td>projects</td><td>1</td></tr>
                <tr><td>√ârt√©kes√≠t√©s</td><td>sales</td><td>2</td></tr>
                <tr><td>Dokumentumok</td><td>documents</td><td>3</td></tr>
                <tr><td>Napt√°r</td><td>calendar</td><td>4</td></tr>
                <tr><td>Feladatok √©s esem√©nyek</td><td>my_items</td><td>5</td></tr>
                <tr><td>Audit</td><td>audit</td><td>6</td></tr>
            </tbody>
        </table>

        <h3>5.3. Lej√°rat Kezel√©s</h3>
        <ul>
            <li>Lej√°rat k√∂zeledt√©vel √©rtes√≠t√©s a Notification Center-ben</li>
            <li>Lej√°rt licenc ‚Üí read-only m√≥d</li>
            <li>LicenseGuard komponens v√©di a v√©dett oldalakat</li>
        </ul>

        <h3>5.4. Licenc Gener√°tor</h3>
        <p>Super Admin sz√°m√°ra el√©rhet≈ë UI a licenckulcsok gener√°l√°s√°hoz (feature bitmask, max users, √©rv√©nyess√©g).</p>
    </div>

    <div class="section" id="edge-functions">
        <h2>6. EDGE FUNCTIONS</h2>

        <h3>6.1. Authentication Functions</h3>
        <table>
            <thead><tr><th>Funkci√≥</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td><code>verify-2fa-token</code></td><td>TOTP vagy recovery k√≥d valid√°l√°s, session_2fa_verifications √≠r√°s</td></tr>
                <tr><td><code>generate-recovery-codes</code></td><td>10 db backup k√≥d gener√°l√°s, hash t√°rol√°s</td></tr>
                <tr><td><code>complete-registration</code></td><td>Regisztr√°ci√≥ befejez√©se k√≥d valid√°ci√≥val</td></tr>
                <tr><td><code>get-active-sessions</code></td><td>Akt√≠v session√∂k lek√©rdez√©se inaktivit√°s timeout-on bel√ºl</td></tr>
                <tr><td><code>terminate-user-session</code></td><td>Session lez√°r√°s realtime broadcast-tal</td></tr>
            </tbody>
        </table>

        <h3>6.2. User Management Functions</h3>
        <table>
            <thead><tr><th>Funkci√≥</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td><code>admin-create-user</code></td><td>√öj felhaszn√°l√≥ l√©trehoz√°sa + v√°llalat hozz√°rendel√©s + licenc ellen≈ërz√©s</td></tr>
                <tr><td><code>admin-update-user</code></td><td>Felhaszn√°l√≥ m√≥dos√≠t√°sa (role v√°ltoztat√°s v√©delem)</td></tr>
                <tr><td><code>admin-update-password</code></td><td>Jelsz√≥ reset, must_change_password = true</td></tr>
                <tr><td><code>admin-delete-user</code></td><td>Soft delete + session termination + kapcsol√≥d√≥ adatok t√∂rl√©se</td></tr>
                <tr><td><code>send-registration-invite</code></td><td>Regisztr√°ci√≥s k√≥d gener√°l√°s √©s email k√ºld√©s</td></tr>
            </tbody>
        </table>

        <h3>6.3. License Functions</h3>
        <table>
            <thead><tr><th>Funkci√≥</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td><code>activate-license</code></td><td>Licenc kulcs valid√°l√°s √©s aktiv√°l√°s</td></tr>
                <tr><td><code>validate-license</code></td><td>Licenc √©rv√©nyess√©g √©s seat usage ellen≈ërz√©s</td></tr>
            </tbody>
        </table>

        <h3>6.4. Notification Functions</h3>
        <table>
            <thead><tr><th>Funkci√≥</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td><code>notify-account-lock</code></td><td>Email k√ºld√©s fi√≥k z√°rol√°skor</td></tr>
                <tr><td><code>check-deadlines</code></td><td>Hat√°rid≈ë ellen≈ërz√©s √©s √©rtes√≠t√©s gener√°l√°s</td></tr>
                <tr><td><code>send-email</code></td><td>√Åltal√°nos email k√ºld√©s Resend API-val</td></tr>
                <tr><td><code>send-event-invitation</code></td><td>Esem√©ny megh√≠v√≥ email ICS mell√©klettel</td></tr>
            </tbody>
        </table>

        <h3>6.5. Automation Functions</h3>
        <table>
            <thead><tr><th>Funkci√≥</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td><code>execute-automation</code></td><td>Automatiz√°ci√≥s szab√°lyok v√©grehajt√°sa trigger alapj√°n</td></tr>
            </tbody>
        </table>

        <h3>6.6. Other Functions</h3>
        <table>
            <thead><tr><th>Funkci√≥</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td><code>check-api-key-status</code></td><td>Resend API kulcs ellen≈ërz√©s (Super Admin only)</td></tr>
            </tbody>
        </table>
    </div>

    <div class="section" id="modules">
        <h2>7. FUNKCION√ÅLIS MODULOK</h2>

        <h3>7.1. Partner Modul</h3>
        <ul>
            <li>H√°romszint≈± c√≠mrendszer (sz√©khely k√∂telez≈ë, telephely opcion√°lis, levelez√©si opcion√°lis) m√°sol√°si lehet≈ës√©ggel ("Megegyezik a sz√©khellyel" / "Megegyezik a telephellyel" checkbox)</li>
            <li>Magyar ad√≥sz√°m valid√°ci√≥ (xxxxxxxx-x-xx form√°tum, ellen≈ërz≈ë sz√°mjegy, √ÅFA k√≥d 1-5, NAV region√°lis k√≥dok)</li>
            <li><strong>Ad√≥sz√°m k√∂telez≈ë</strong> - ment√©s nem lehets√©ges √©rv√©nyes ad√≥sz√°m n√©lk√ºl</li>
            <li>Kapcsolattart√≥k kezel√©se (els≈ëdleges jel√∂l√©s, poz√≠ci√≥, el√©rhet≈ës√©gek)</li>
            <li>Felhaszn√°l√≥i hozz√°f√©r√©s korl√°toz√°s (restrict_access + partner_user_access)</li>
            <li>Partner r√©szlet oldal: Projektek, Feladatok, Esem√©nyek, Dokumentumok, √ârt√©kes√≠t√©sek tabok</li>
            <li>Export (PDF, Excel, CSV) l√°that√≥ oszlopokkal</li>
            <li>Oszlop l√°that√≥s√°g √©s sorrend testreszab√°s localStorage-ban</li>
            <li><strong>Anya-le√°ny v√°llalat kapcsolat:</strong> ELT√ÅVOL√çTVA (user d√∂nt√©s)</li>
        </ul>

        <h3>7.2. Projekt Modul</h3>
        <ul>
            <li>Projekt CRUD + r√©szlet oldal</li>
            <li>Kanban n√©zet (drag-drop st√°tuszv√°lt√°s)</li>
            <li>Gantt diagram (id≈ësor n√©zet)</li>
            <li>Projekt sz√≠nek napt√°rban (task_color, event_color)</li>
            <li>Projekt felel≈ës√∂k (owner, responsible1, responsible2)</li>
            <li>Kapcsol√≥d√≥ feladatok, esem√©nyek, dokumentumok</li>
        </ul>

        <h3>7.3. Sales Modul</h3>
        <ul>
            <li>Sales pipeline kezel√©s</li>
            <li>V√°rhat√≥ √©rt√©k √©s lez√°r√°si d√°tum</li>
            <li>√úzlet√°gi besorol√°s (business_unit)</li>
            <li>Kapcsol√≥d√≥ feladatok, dokumentumok</li>
            <li>Sales r√©szlet oldal</li>
        </ul>

        <h3>7.4. Szerz≈ëd√©s Modul</h3>
        <ul>
            <li>Teljes verzi√≥k√∂vet√©s (contract_versions) - minden m√≥dos√≠t√°s √∫j verzi√≥</li>
            <li>Verzi√≥ vissza√°ll√≠t√°s (admin only)</li>
            <li>Lej√°rat, felmond√°si id≈ë, meg√∫j√≠t√°s figyelmeztet√©sek (konfigur√°lhat√≥ napok)</li>
            <li>Fizet√©si inform√°ci√≥k (gyakoris√°g: monthly/quarterly/annually/one-time, √∂sszeg, deviza)</li>
            <li>Automatikus meg√∫j√≠t√°s be√°ll√≠t√°s (auto_renewal + renewal_period_months)</li>
            <li>Felhaszn√°l√≥i hozz√°f√©r√©s korl√°toz√°s (restrict_access + contract_user_access)</li>
            <li>Multi-file t√°mogat√°s (verzi√≥k√∂vet√©ssel, verzi√≥ vissza√°ll√≠t√°s admin only)</li>
            <li>PDF √©s k√©p el≈ën√©zet (Office form√°tumok NEM t√°mogatottak)</li>
            <li>Visibility: COMPANY_ONLY, PROJECT_ONLY, SALES_ONLY, PUBLIC (Documents modullal azonos RLS)</li>
            <li>Bulk ZIP let√∂lt√©s ({szerz≈ëd√©s_c√≠m}_{YYYYMMDD_HHMMSS}.zip)</li>
            <li>Sz≈±r√©s (f√°jlt√≠pus, d√°tum, sz√∂veg), drag-drop felt√∂lt√©s</li>
            <li>Soft delete (admin) / Hard delete (super admin + jelsz√≥)</li>
            <li>J√≥v√°hagy√°si workflow integr√°ci√≥</li>
        </ul>

        <h3>7.5. Dokumentum Modul</h3>
        <ul>
            <li>Multi-file t√°mogat√°s (document_files t√°bla)</li>
            <li>Verzi√≥k√∂vet√©s √©s vissza√°ll√≠t√°s (admin only)</li>
            <li>Visibility: COMPANY_ONLY, PROJECT_ONLY, SALES_ONLY, PUBLIC</li>
            <li><strong>PDF √©s k√©p el≈ën√©zet</strong> (Word/Excel/PowerPoint preview ELT√ÅVOL√çTVA - nem megb√≠zhat√≥ b√∂ng√©sz≈ëben)</li>
            <li>PDF el≈ën√©zet komplex funkci√≥kkal:
                <ul>
                    <li>Folyamatos g√∂rget√©s (nincs lapoz√°s gomb)</li>
                    <li>Zoom (50-200%, reset gomb)</li>
                    <li>Scroll-alap√∫ oldalsz√°m kijelz√©s + oldal ugr√°s Enter-rel</li>
                    <li>Keres√©s kiemel√©sekkel (Acrobat st√≠lus√∫ - vil√°gosk√©k tal√°latok, s√∂t√©tk√©k aktu√°lis)</li>
                    <li>Thumbnail sidebar + k√∂nyvjelz≈ëk (ha van a PDF-ben)</li>
                    <li>Forgat√°s (90¬∞ l√©pt√©k), teljes k√©perny≈ë, nyomtat√°s</li>
                    <li>Sz√∂veg kijel√∂l√©s √©s m√°sol√°s</li>
                </ul>
            </li>
            <li>Bulk ZIP let√∂lt√©s ({dokumentum_c√≠m}_{YYYYMMDD_HHMMSS}.zip)</li>
            <li>Sz≈±r√©s (f√°jlt√≠pus, d√°tum tartom√°ny, szabad sz√∂veg)</li>
            <li>Drag-drop felt√∂lt√©s + checkbox-os kijel√∂l√©s</li>
            <li>Soft delete (admin) / Hard delete (super admin + jelsz√≥ meger≈ës√≠t√©s)</li>
            <li>J√≥v√°hagy√°si workflow integr√°ci√≥</li>
            <li>F√°jlt√≠pus-specifikus ikonok (getFileTypeIcon utility)</li>
        </ul>

        <h3>7.6. Feladat √©s Esem√©ny Modul</h3>
        <ul>
            <li>Feladatok √©s esem√©nyek <strong>k√ºl√∂n t√°bl√°kban</strong> (tasks, events)</li>
            <li>Ism√©tl≈ëd√©s t√°mogat√°s (none, daily, weekly, monthly, yearly) intervallummal</li>
            <li>Virtu√°lis el≈ëfordul√°sok gener√°l√°sa napt√°rhoz (recurrenceUtils.generateRecurrences)</li>
            <li>Eg√©sz napos jel√∂l√©s explicit toggle-lel</li>
            <li>Partner, projekt, sales kapcsolat (opcion√°lis)</li>
            <li>Felel≈ës √©s l√©trehoz√≥ megk√ºl√∂nb√∂ztet√©s</li>
            <li><strong>Hat√°rid≈ë/befejez√©si id≈ë k√∂telez≈ë</strong></li>
            <li>L√°that√≥s√°g: <strong>felel≈ës VAGY l√©trehoz√≥</strong> l√°tja saj√°t napt√°rban √©s list√°ban</li>
            <li>T√∂rl√©si jogosults√°g:
                <ul>
                    <li>Szem√©lyes (projekt/sales n√©lk√ºli): l√©trehoz√≥ t√∂r√∂lheti</li>
                    <li>Projekthez/sales-hez k√∂t√∂tt: super admin, company admin (can_delete), projekt owner, projekt felel≈ës√∂k t√∂r√∂lhetik</li>
                </ul>
            </li>
            <li>"Saj√°t dolgaim" (My Items) oldal: szem√©lyes + hozz√°rendelt feladatok/esem√©nyek</li>
            <li>Esem√©nyek r√©sztvev≈ëkkel (bels≈ë user + k√ºls≈ë email megh√≠v√≥k)</li>
        </ul>

        <h3>7.7. Napt√°r Modul</h3>
        <ul>
            <li>H√°rom n√©zet: nap, h√©t, h√≥nap (h√≥nap n√©zetn√©l drag meg≈ërzi az eredeti id≈ëpontot)</li>
            <li>24 √≥r√°s id≈ëform√°tum (alkalmaz√°s-szerte k√∂telez≈ë)</li>
            <li>Drag-drop √°t√ºtemez√©s (@dnd-kit - DraggableTask + DroppableCell)</li>
            <li>TaskViewSheet: kattint√°sra r√©szletek megjelen√≠t√©se (read-only slide-out panel)</li>
            <li>Projekt sz√≠nek (task_color, event_color) √©s szem√©lyes sz√≠nek (personal_task_color, personal_event_color)</li>
            <li>Eg√©sz napos elemek k√ºl√∂n "all-day" sorban (nem az √≥r√°s gridben)</li>
            <li>Sticky fejl√©c, oldalon bel√ºli g√∂rget√©s (nem bels≈ë scrollbar)</li>
            <li>H√©t √©s nap n√©zetben konzisztens grid template az oszlopok igaz√≠t√°s√°hoz</li>
        </ul>

        <h3>7.8. Id≈ëk√∂vet√©s (Time Tracking)</h3>
        <ul>
            <li>Timer ind√≠t√°s/le√°ll√≠t√°s feladathoz</li>
            <li>Manu√°lis id≈ëbejegyz√©s (start, end, le√≠r√°s)</li>
            <li>Egy akt√≠v timer / felhaszn√°l√≥</li>
            <li>√ñsszes√≠t√©s projekt √©s id≈ëszak szerint</li>
            <li>TimeTrackingWidget feladat r√©szletn√©l</li>
            <li>TimeTracking oldal sz≈±r≈ëkkel √©s exporttal</li>
        </ul>

        <h3>7.9. J√≥v√°hagy√°si Workflow</h3>
        <ul>
            <li>J√≥v√°hagy√°s k√©r√©s: szerz≈ëd√©s, dokumentum, projekt</li>
            <li>St√°tuszok: pending, approved, rejected</li>
            <li>Elutas√≠t√°s indokl√°s k√∂telez≈ë</li>
            <li>El≈ëzm√©nyek megtekint√©se (ApprovalHistoryDialog)</li>
            <li>Dashboard widget: PendingApprovalsWidget (admin)</li>
            <li>Integr√°lva: ContractDetail, DocumentDetail, ProjectDetail</li>
        </ul>

        <h3>7.10. Automatiz√°ci√≥</h3>
        <ul>
            <li><strong>Trigger t√≠pusok:</strong>
                <ul>
                    <li>task_status_change (from/to status)</li>
                    <li>task_created</li>
                    <li>deadline_approaching (days_before)</li>
                    <li>project_status_change</li>
                    <li>sales_status_change</li>
                    <li>contract_expiring</li>
                </ul>
            </li>
            <li><strong>Akci√≥ t√≠pusok:</strong>
                <ul>
                    <li>send_notification (title, message)</li>
                    <li>change_status (new_status)</li>
                    <li>assign_user (user_id)</li>
                    <li>create_task (task_title, deadline_days)</li>
                    <li>send_email</li>
                </ul>
            </li>
            <li>RuleConditionBuilder: dinamikus UI trigger/action config-hoz</li>
            <li>V√©grehajt√°si napl√≥ (automation_logs)</li>
            <li>execute-automation edge function</li>
        </ul>

        <h3>7.11. Dashboard</h3>
        <ul>
            <li>Testreszabhat√≥ widgetek drag-drop rendez√©ssel</li>
            <li>Widget t√≠pusok:
                <ul>
                    <li>LicenseStatusWidget</li>
                    <li>PendingApprovalsWidget (admin)</li>
                    <li>TasksWidget (lej√°r√≥/k√©s≈ë feladatok)</li>
                    <li>WeeklyCalendarWidget</li>
                    <li>ProjectsChart (bar chart)</li>
                    <li>SalesChart (pie chart)</li>
                    <li>RecentActivityWidget</li>
                </ul>
            </li>
            <li>Widget visibility, position, width be√°ll√≠t√°s</li>
            <li>Felhaszn√°l√≥nk√©nti ment√©s (dashboard_widgets t√°bla)</li>
            <li>DashboardCustomizer popover</li>
        </ul>

        <h3>7.12. √ârtes√≠t√©sek</h3>
        <ul>
            <li>Real-time Supabase Realtime subscriptions</li>
            <li>NotificationCenter (TopBar-ban harang ikon)</li>
            <li>T√≠pusok: task, deadline, automation, approval, system</li>
            <li>Olvasottnak jel√∂l√©s, navig√°l√°s entit√°shoz</li>
            <li>check-deadlines edge function periodikus futtat√°shoz</li>
        </ul>

        <h3>7.13. Keres√©s √©s Export</h3>
        <ul>
            <li>GlobalSearch: projektek, sales, partnerek, dokumentumok keres√©se</li>
            <li>ExportMenu: PDF, Excel, CSV form√°tumok</li>
            <li>L√°that√≥ oszlopok export√°l√°sa</li>
            <li>jspdf + jspdf-autotable, xlsx k√∂nyvt√°rak</li>
        </ul>

        <h3>7.14. Kedvencek √©s C√≠mk√©k</h3>
        <ul>
            <li>FavoriteButton: csillag ikon a "kedvenc" oszlopban (Projektek, Sales, Szerz≈ëd√©sek, Partnerek, Dokumentumok)</li>
            <li>favorites t√°bla felhaszn√°l√≥nk√©nt (user_id scoped)</li>
            <li>TagSelector: c√≠mke v√°laszt√≥ √©s inline l√©trehoz√°s</li>
            <li>tags + entity_tags t√°bl√°k (v√°llalat-scoped)</li>
            <li><strong>C√≠mke t√∂rl√©si korl√°toz√°s:</strong> csak akkor t√∂r√∂lhet≈ë, ha usageCount = 0 (nincs egyetlen entit√°shoz sem hozz√°rendelve)</li>
            <li>C√≠mke t√∂rl√©s: csak admin l√°tja a t√∂rl√©s gombot</li>
        </ul>

        <h3>7.15. Bulk M≈±veletek</h3>
        <ul>
            <li>Checkbox-os kijel√∂l√©s t√°bl√°zatokban</li>
            <li>BulkActionsToolbar: t√∂meges t√∂rl√©s, st√°tuszv√°lt√°s</li>
            <li>BulkDeleteDialog: meger≈ës√≠t√©s k√©r√©ssel</li>
        </ul>

        <h3>7.16. Riportok √©s Import</h3>
        <ul>
            <li>Reports oldal: projekt, sales, partner √∂sszes√≠t√©sek</li>
            <li>CSV/Excel import: partnerek, projektek, sales</li>
            <li>ImportDialog: mez≈ë mapping, valid√°ci√≥, hibajelent√©s</li>
            <li>Dokumentum sablonok (document_templates) v√°ltoz√≥ helyettes√≠t√©ssel</li>
        </ul>

        <h3>7.17. P√©nznem Form√°z√°s</h3>
        <ul>
            <li>Konfigur√°lhat√≥ system_settings-ben: use_browser_locale, thousand_separator, decimal_separator</li>
            <li>HUF: 0 tizedesjegy (kerek√≠tve), EUR/USD: 2 tizedesjegy</li>
            <li>P√©nz√∂sszeg mez≈ëk: monospace bet≈±t√≠pus (font-mono), jobbra igaz√≠tva (text-right)</li>
            <li>formatCurrency() utility f√ºggv√©ny k√∂zponti form√°z√°shoz</li>
        </ul>
    </div>

    <div class="section" id="frontend">
        <h2>8. FRONTEND STRUKT√öRA</h2>

        <h3>8.1. F≈ëbb Oldalak</h3>
        <table>
            <thead><tr><th>Route</th><th>Komponens</th><th>Le√≠r√°s</th></tr></thead>
            <tbody>
                <tr><td>/</td><td>Index</td><td>Redirect auth alapj√°n</td></tr>
                <tr><td>/auth</td><td>Auth</td><td>Login + 2FA</td></tr>
                <tr><td>/register</td><td>Register</td><td>Regisztr√°ci√≥ k√≥ddal</td></tr>
                <tr><td>/change-password</td><td>ChangePassword</td><td>K√∂telez≈ë jelsz√≥v√°ltoztat√°s</td></tr>
                <tr><td>/dashboard</td><td>Dashboard</td><td>Testreszabhat√≥ dashboard</td></tr>
                <tr><td>/calendar</td><td>CalendarPage</td><td>Napt√°r (nap/h√©t/h√≥nap)</td></tr>
                <tr><td>/my-items</td><td>MyItems</td><td>Saj√°t feladatok √©s esem√©nyek</td></tr>
                <tr><td>/partners, /partners/:id</td><td>Partners, PartnerDetail</td><td>Partner lista √©s r√©szletek</td></tr>
                <tr><td>/projects, /projects/:id</td><td>Projects, ProjectDetail</td><td>Projektek</td></tr>
                <tr><td>/sales, /sales/:id</td><td>Sales, SalesDetail</td><td>√ârt√©kes√≠t√©sek</td></tr>
                <tr><td>/contracts, /contracts/:id</td><td>Contracts, ContractDetail</td><td>Szerz≈ëd√©sek</td></tr>
                <tr><td>/documents, /documents/:id</td><td>Documents, DocumentDetail</td><td>Dokumentumok</td></tr>
                <tr><td>/document-templates</td><td>DocumentTemplates</td><td>Sablonok</td></tr>
                <tr><td>/time-tracking</td><td>TimeTracking</td><td>Id≈ëk√∂vet√©s</td></tr>
                <tr><td>/kanban</td><td>Kanban</td><td>Kanban n√©zet</td></tr>
                <tr><td>/gantt</td><td>Gantt</td><td>Gantt diagram</td></tr>
                <tr><td>/automation</td><td>Automation</td><td>Automatiz√°ci√≥s szab√°lyok</td></tr>
                <tr><td>/reports</td><td>Reports</td><td>Riportok</td></tr>
                <tr><td>/logs</td><td>Logs</td><td>Audit napl√≥</td></tr>
                <tr><td>/settings</td><td>Settings</td><td>Be√°ll√≠t√°sok (tabs)</td></tr>
                <tr><td>/account-management</td><td>AccountManagement</td><td>Fi√≥k kezel√©s (SA)</td></tr>
                <tr><td>/license-generator</td><td>LicenseGenerator</td><td>Licenc gener√°tor (SA)</td></tr>
            </tbody>
        </table>

        <h3>8.2. F≈ë Layout Komponensek</h3>
        <ul>
            <li><strong>MainLayout:</strong> AppSidebar + TopBar</li>
            <li><strong>AppSidebar:</strong> √ñsszecsukhat√≥ navig√°ci√≥ (role/feature alap√∫), toggle gomb k√∂telez≈ë funkci√≥</li>
            <li><strong>TopBar:</strong> V√°llalat v√°laszt√≥ (bal oldalon, dinamikus sz√©less√©g), GlobalSearch (jobb oldalon), √ârtes√≠t√©sek (harang), User menu, Nyelv v√°laszt√≥</li>
            <li><strong>Day/Night toggle:</strong> Regisztr√°ci√≥s oldalon is el√©rhet≈ë (bejelentkez√©s el≈ëtt)</li>
        </ul>

        <h3>8.3. T√°bl√°zat Rendszer</h3>
        <ul>
            <li><strong>ResizableTable:</strong> Standard t√°bl√°zat komponens minden list√°z√≥ oldalon</li>
            <li><strong>useColumnSettings hook:</strong> Oszlop l√°that√≥s√°g, sorrend, sz√©less√©g localStorage-ban (t√°bl√°nk√©nt k√ºl√∂n kulcs)</li>
            <li><strong>ColumnSettingsPopover:</strong> Oszlop be√°ll√≠t√°sok UI</li>
            <li>Sticky header (top-0 z-10)</li>
            <li>Drag-drop oszlop rendez√©s (fejl√©cen √©s popover-ben)</li>
            <li>Oszlop sz√©less√©g √°ll√≠t√°s h√∫z√°ssal</li>
            <li>Kompakt padding (px-3 py-2)</li>
            <li>Dinamikus sormagass√°g (tartalom alapj√°n)</li>
            <li><strong>Igaz√≠t√°s szab√°ly:</strong> d√°tumok, badge-ek, akci√≥k, st√°tuszok k√∂z√©pre; nevek, sz√∂vegek balra</li>
        </ul>

        <h3>8.4. F≈ëbb Hookok</h3>
        <table>
            <thead><tr><th>Kateg√≥ria</th><th>Hookok</th></tr></thead>
            <tbody>
                <tr><td>Auth</td><td>useUserProfile, use2FA, useInactivityLogout, useAccountLock</td></tr>
                <tr><td>Data</td><td>useCompanies, useUsers, usePartners, useProjects, useSales, useContracts, useDocuments, useTasks, useEvents</td></tr>
                <tr><td>Features</td><td>useTimeTracking, useApprovalWorkflows, useAutomationRules, useNotifications, useFavorites, useTags, useComments</td></tr>
                <tr><td>UI</td><td>useColumnSettings, useDashboardWidgets, useBulkSelection, useSortableData</td></tr>
                <tr><td>License</td><td>useLicenseValidation, useLicenseEnforcement, useFeatureAccess, useReadOnlyMode</td></tr>
            </tbody>
        </table>

        <h3>8.5. Branding</h3>
        <ul>
            <li>Alkalmaz√°s neve: PipeLiT</li>
            <li>Felt√∂lthet≈ë logo (Settings > System)</li>
            <li>Supabase storage "branding" bucket</li>
            <li>Logo megjelenik: login, register, sidebar</li>
        </ul>
    </div>

    <div class="section" id="i18n">
        <h2>9. NEMZETK√ñZIES√çT√âS (I18N)</h2>

        <h3>9.1. T√°mogatott Nyelvek</h3>
        <ul>
            <li><strong>Magyar (hu)</strong> - alap√©rtelmezett</li>
            <li><strong>English (en)</strong></li>
        </ul>

        <h3>9.2. Ford√≠t√°si F√°jlok</h3>
        <ul>
            <li><code>src/locales/hu.json</code>, <code>src/locales/en.json</code> - UI sz√∂vegek</li>
            <li><code>src/locales/masterdata-hu.json</code>, <code>src/locales/masterdata-en.json</code> - T√∂rzsadat c√≠mk√©k</li>
        </ul>

        <h3>9.3. Nyelv V√°laszt√°s</h3>
        <ul>
            <li>TopBar-ban dropdown</li>
            <li>Felhaszn√°l√≥i preferencia ment√©se (profiles.language)</li>
            <li>Browser language detection fallback</li>
            <li>Regisztr√°ci√≥s oldalon is el√©rhet≈ë (bejelentkez√©s n√©lk√ºl)</li>
        </ul>

        <h3>9.4. Id≈ëform√°tum</h3>
        <ul>
            <li>24 √≥r√°s form√°tum az eg√©sz alkalmaz√°sban</li>
            <li>date-fns library, hu locale</li>
        </ul>
    </div>

    <div class="section" id="summary">
        <h2>10. √ñSSZEFOGLAL√ÅS</h2>

        <div class="info-box">
            <strong>Implement√°ci√≥ st√°tusz: 100% ‚úì</strong><br><br>
            
            <strong style="color: #28a745;">Teljesen implement√°lt:</strong><br>
            ‚Ä¢ Teljes autentik√°ci√≥ (login, 2FA, session kezel√©s, regisztr√°ci√≥)<br>
            ‚Ä¢ Felhaszn√°l√≥- √©s jogosults√°gkezel√©s (RLS, roles, permissions)<br>
            ‚Ä¢ V√°llalat √©s licenckezel√©s (aktiv√°l√°s, seat limit, feature flags)<br>
            ‚Ä¢ Partner modul (c√≠mek, kapcsolattart√≥k, valid√°ci√≥)<br>
            ‚Ä¢ Projekt √©s Sales modul (Kanban, Gantt)<br>
            ‚Ä¢ Szerz≈ëd√©s modul (verzi√≥z√°s, figyelmeztet√©sek)<br>
            ‚Ä¢ Dokumentum modul (multi-file, PDF el≈ën√©zet)<br>
            ‚Ä¢ Feladat √©s Esem√©ny modul (ism√©tl≈ëd√©s, napt√°r)<br>
            ‚Ä¢ Id≈ëk√∂vet√©s (timer, manu√°lis bejegyz√©s)<br>
            ‚Ä¢ J√≥v√°hagy√°si workflow (k√©r√©s/j√≥v√°hagy√°s/elutas√≠t√°s)<br>
            ‚Ä¢ Automatiz√°ci√≥ (triggerek, akci√≥k, napl√≥z√°s)<br>
            ‚Ä¢ Dashboard (testreszabhat√≥ widgetek)<br>
            ‚Ä¢ √ârtes√≠t√©sek (real-time)<br>
            ‚Ä¢ Keres√©s √©s Export (PDF, Excel, CSV)<br>
            ‚Ä¢ Kedvencek √©s C√≠mk√©k<br>
            ‚Ä¢ Audit log<br>
            ‚Ä¢ Rendszerbe√°ll√≠t√°sok<br>
            ‚Ä¢ Email integr√°ci√≥ (Resend API)
        </div>

        <h3>10.1. Biztons√°gi Jellemz≈ëk</h3>
        <ul class="feature-list">
            <li class="done">Row Level Security minden t√°bl√°n</li>
            <li class="done">2FA (TOTP + recovery codes)</li>
            <li class="done">Account lockout rate limiting</li>
            <li class="done">Jelsz√≥ komplexit√°s + 90 napos lej√°rat</li>
            <li class="done">Single session enforcement</li>
            <li class="done">Inaktivit√°s logout</li>
            <li class="done">Session termination (admin)</li>
            <li class="done">Audit logging</li>
            <li class="done">Soft delete pattern</li>
            <li class="done">SECURITY DEFINER RPC-k RLS bypass-hoz</li>
        </ul>

        <h3>10.2. Technikai R√©szletek</h3>
        <ul>
            <li><strong>Build:</strong> Vite + TypeScript</li>
            <li><strong>State Management:</strong> TanStack Query (react-query) - staleTime: 5 perc, gcTime: 30 perc, refetchOnWindowFocus: false</li>
            <li><strong>Routing:</strong> react-router-dom v6</li>
            <li><strong>Lazy Loading:</strong> React.lazy + Suspense minden oldalra (PageLoader skeleton fallback)</li>
            <li><strong>Forms:</strong> react-hook-form + zod</li>
            <li><strong>UI:</strong> shadcn/ui + Tailwind CSS + Lucide icons</li>
            <li><strong>Drag & Drop:</strong> @dnd-kit</li>
            <li><strong>Charts:</strong> Recharts</li>
            <li><strong>PDF:</strong> react-pdf + pdfjs-dist (blob URL k√∂telez≈ë, nem signed URL)</li>
            <li><strong>Export:</strong> jspdf + jspdf-autotable + xlsx + jszip (bulk download)</li>
            <li><strong>Date inputs:</strong> Native HTML date/datetime-local (react-day-picker Deno kompatibilit√°si probl√©ma miatt)</li>
            <li><strong>Rich Text:</strong> TipTap</li>
        </ul>

        <h3>10.3. Fontos Architekt√∫r√°lis D√∂nt√©sek</h3>
        <ul>
            <li><strong>Soft Delete Pattern:</strong> SECURITY DEFINER RPC f√ºggv√©nyeken kereszt√ºl (RLS policy konfliktus miatt) - soft_delete_project, soft_delete_task, soft_delete_event, soft_delete_company, soft_delete_document, soft_delete_comment</li>
            <li><strong>Real-time Session Termination:</strong> Supabase Realtime broadcast (session-terminate-{userId} csatorna) - azonnali kijelentkeztet√©s polling n√©lk√ºl</li>
            <li><strong>User T√∂rl√©s:</strong> Automatikus session termination + locked_accounts, login_attempts, user_company_permissions cleanup</li>
            <li><strong>Licenc Kulcs:</strong> 12-bit random nonce a nem-determinisztikus gener√°l√°shoz (4096 egyedi √©rt√©k)</li>
            <li><strong>PDF Preview:</strong> Blob URL k√∂telez≈ë (signed URL ‚Üí Chrome CSP/X-Frame-Options blokkol√°s)</li>
            <li><strong>Office Preview:</strong> ELT√ÅVOL√çTVA - Word/Excel/PowerPoint nem megb√≠zhat√≥ b√∂ng√©sz≈ëben</li>
            <li><strong>Event-driven Updates:</strong> Polling helyett Supabase Realtime subscriptions (postgres_changes)</li>
            <li><strong>Comments:</strong> Soft delete SECURITY DEFINER RPC-n kereszt√ºl (csak szerz≈ë t√∂r√∂lheti)</li>
        </ul>

        <h3>10.4. UI/UX Szab√°lyok</h3>
        <ul>
            <li><strong>Form Valid√°ci√≥:</strong> K√∂telez≈ë mez≈ëk piros szeg√©llyel + "K√∂telez≈ë mez≈ë" hiba√ºzenet</li>
            <li><strong>Akci√≥ gombok:</strong> T√°bl√°zatban icon-only (size="icon" h-7 w-7), r√©szlet oldalakon text gomb</li>
            <li><strong>Napt√°r sz√≠nek:</strong> Projekt szint≈± (task_color, event_color) √©s szem√©lyes szint≈± (personal_task_color, personal_event_color) - ColorPicker komponenssel √°ll√≠that√≥</li>
            <li><strong>Resend API kulcs:</strong> Csak Super Admin l√°tja (unmasked), check-api-key-status edge function ellen≈ërzi jogosults√°got</li>
            <li><strong>Settings t√°bl√°zatok:</strong> Companies, Master Data, Account Management tabok is t√°mogatj√°k az oszlop kezel√©st (visibility, reorder, resize)</li>
        </ul>

        <h3>10.5. J√∂v≈ëbeli Lehet≈ës√©gek</h3>
        <ul>
            <li>NAV integr√°ci√≥ (adategyeztet√©s)</li>
            <li>Sz√°ml√°z√≥ rendszer integr√°ci√≥</li>
            <li>Mobile app (React Native)</li>
            <li>Advanced analytics √©s reporting</li>
            <li>Workflow designer (vizu√°lis)</li>
        </ul>
    </div>

    <footer style="margin-top: 50px; padding-top: 20px; border-top: 2px solid #ddd; text-align: center; color: #666;">
        <p>PipeLiT Rendszer Specifik√°ci√≥ v2.1 | Gener√°lva: 2025-12-08</p>
    </footer>
</body>
</html>