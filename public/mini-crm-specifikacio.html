<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PipeLiT - Teljes Rendszer SpecifikÃ¡ciÃ³ v3</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fff;
            padding: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        h2 {
            color: #2c3e50;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-left: 5px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        h4 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th {
            background-color: #3498db;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #ddd;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #e8f4f8;
        }
        
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        
        .status-box {
            display: inline-block;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            width: 100%;
        }
        
        .implemented {
            background-color: #d4edda;
            border-left: 5px solid #28a745;
        }
        
        .not-implemented {
            background-color: #f8d7da;
            border-left: 5px solid #dc3545;
        }
        
        .partial {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
        }
        
        .status-icon {
            font-size: 1.2em;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .green { color: #28a745; }
        .red { color: #dc3545; }
        .orange { color: #ffc107; }
        
        .info-box {
            background-color: #e7f3ff;
            border-left: 5px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .warning-box {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .error-box {
            background-color: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .section {
            page-break-inside: avoid;
        }
        
        @media print {
            body {
                padding: 20px;
            }
            
            .status-box {
                page-break-inside: avoid;
            }
        }
        
        .feature-list {
            list-style: none;
            margin-left: 0;
        }
        
        .feature-list li {
            padding-left: 30px;
            position: relative;
        }
        
        .feature-list li::before {
            position: absolute;
            left: 0;
            font-size: 1.2em;
        }
        
        .feature-list li.done::before {
            content: "âœ“";
            color: #28a745;
        }
        
        .feature-list li.missing::before {
            content: "âœ—";
            color: #dc3545;
        }
        
        .feature-list li.partial::before {
            content: "â—";
            color: #ffc107;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .tech-item strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 5px;
        }
        
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        .decision-box {
            background-color: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .removed-box {
            background-color: #ffebee;
            border-left: 5px solid #f44336;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ PipeLiT - Teljes Rendszer SpecifikÃ¡ciÃ³</h1>
    
    <div class="info-box">
        <strong>Dokumentum informÃ¡ciÃ³k:</strong><br>
        <strong>VerziÃ³: 3.0</strong><br>
        UtolsÃ³ frissÃ­tÃ©s: 2025-12-08<br>
        Projekt tÃ­pus: VÃ¡llalati CRM rendszer feladatkezelÃ©ssel, projektmenedzsmenttel Ã©s automatizÃ¡ciÃ³val<br>
        TechnolÃ³gia: React + TypeScript + Lovable Cloud (Supabase)<br>
        AlkalmazÃ¡s neve: <strong>PipeLiT</strong>
    </div>

    <div class="toc">
        <h3>ğŸ“‘ TartalomjegyzÃ©k</h3>
        <ol>
            <li><a href="#intro">BevezetÃ©s Ã©s Scope</a></li>
            <li><a href="#tech-stack">TechnolÃ³giai Stack Ã©s KÃ¶rnyezet</a></li>
            <li><a href="#architecture">Magas SzintÅ± ArchitektÃºra</a></li>
            <li><a href="#auth-security">Auth Ã©s Security Modell</a></li>
            <li><a href="#database">Adatmodell / AdatbÃ¡zis SÃ©ma</a></li>
            <li><a href="#modules">FunkcionÃ¡lis Modulok</a></li>
            <li><a href="#flows">Folyamatok / Flow-k</a></li>
            <li><a href="#edge-functions">Edge Functions</a></li>
            <li><a href="#frontend">Frontend StruktÃºra</a></li>
            <li><a href="#non-functional">Nem FunkcionÃ¡lis KÃ¶vetelmÃ©nyek</a></li>
            <li><a href="#architectural-decisions">ArchitektÃºrÃ¡lis DÃ¶ntÃ©sek</a></li>
            <li><a href="#backlog">Roadmap / Backlog</a></li>
        </ol>
    </div>

    <!-- ==================== 1. BEVEZETÃ‰S ==================== -->
    <div class="section" id="intro">
        <h2>1. BEVEZETÃ‰S Ã‰S SCOPE</h2>
        
        <h3>1.1. A PipeLiT CÃ©lja</h3>
        <p>A PipeLiT egy tÃ¶bbvÃ¡llalatÃº (multi-tenant) CRM Ã©s projektmenedzsment rendszer, amely integrÃ¡lt megoldÃ¡st nyÃºjt:</p>
        <ul>
            <li>Partnerek Ã©s Ã¼gyfelek kezelÃ©sÃ©re</li>
            <li>Projektek Ã©s feladatok menedzselÃ©sÃ©re</li>
            <li>Ã‰rtÃ©kesÃ­tÃ©si pipeline nyomon kÃ¶vetÃ©sÃ©re</li>
            <li>SzerzÅ‘dÃ©sek Ã©s dokumentumok tÃ¡rolÃ¡sÃ¡ra, verziÃ³kÃ¶vetÃ©sÃ©re</li>
            <li>IdÅ‘kÃ¶vetÃ©sre Ã©s erÅ‘forrÃ¡s-tervezÃ©sre</li>
            <li>AutomatizÃ¡lt munkafolyamatokra Ã©s Ã©rtesÃ­tÃ©sekre</li>
        </ul>

        <h3>1.2. FÅ‘ Use-Case-ek</h3>
        <ul>
            <li><strong>ÃœgyfÃ©lkezelÃ©s:</strong> Partnerek, kapcsolattartÃ³k, cÃ­mek nyilvÃ¡ntartÃ¡sa</li>
            <li><strong>Projektmenedzsment:</strong> Projektek tervezÃ©se, feladatok kiosztÃ¡sa, hatÃ¡ridÅ‘k kÃ¶vetÃ©se</li>
            <li><strong>Sales Pipeline:</strong> Ã‰rtÃ©kesÃ­tÃ©si lehetÅ‘sÃ©gek nyomon kÃ¶vetÃ©se, vÃ¡rhatÃ³ bevÃ©tel elÅ‘rejelzÃ©se</li>
            <li><strong>DokumentumkezelÃ©s:</strong> SzerzÅ‘dÃ©sek, ajÃ¡nlatok, jegyzÅ‘kÃ¶nyvek tÃ¡rolÃ¡sa verziÃ³kÃ¶vetÃ©ssel</li>
            <li><strong>IdÅ‘kÃ¶vetÃ©s:</strong> Projektekre fordÃ­tott idÅ‘ mÃ©rÃ©se, riportolÃ¡sa</li>
            <li><strong>AutomatizÃ¡ciÃ³:</strong> Trigger-alapÃº Ã©rtesÃ­tÃ©sek, stÃ¡tuszvÃ¡ltÃ¡sok, feladat-generÃ¡lÃ¡s</li>
        </ul>

        <h3>1.3. CÃ©lfelhasznÃ¡lÃ³k</h3>
        <table>
            <thead><tr><th>SzerepkÃ¶r</th><th>LeÃ­rÃ¡s</th><th>FÅ‘ funkciÃ³k</th></tr></thead>
            <tbody>
                <tr><td><strong>Super Admin</strong></td><td>RendszerszintÅ± adminisztrÃ¡tor</td><td>VÃ¡llalatok, licencek, felhasznÃ¡lÃ³k kezelÃ©se, rendszerbeÃ¡llÃ­tÃ¡sok, audit</td></tr>
                <tr><td><strong>Admin</strong></td><td>VÃ¡llalati adminisztrÃ¡tor</td><td>SajÃ¡t vÃ¡llalat beÃ¡llÃ­tÃ¡sai, felhasznÃ¡lÃ³-kezelÃ©s a licenc limiteken belÃ¼l, jÃ³vÃ¡hagyÃ¡sok</td></tr>
                <tr><td><strong>Normal</strong></td><td>ÃltalÃ¡nos felhasznÃ¡lÃ³</td><td>Projektek, feladatok, Ã©rtÃ©kesÃ­tÃ©sek kezelÃ©se a jogosultsÃ¡gok szerint</td></tr>
                <tr><td><strong>Viewer</strong></td><td>Csak olvasÃ³</td><td>Adatok megtekintÃ©se, export (nem fogyaszt licenc seat-et)</td></tr>
            </tbody>
        </table>

        <h3>1.4. ImplementÃ¡lt Modulok ÃttekintÃ©se</h3>
        <ul class="feature-list">
            <li class="done">FelhasznÃ¡lÃ³- Ã©s jogosultsÃ¡gkezelÃ©s</li>
            <li class="done">VÃ¡llalatkezelÃ©s + licencrendszer (feature flag, seat limit)</li>
            <li class="done">PartnerkezelÃ©s (kapcsolattartÃ³k, hÃ¡romszintÅ± cÃ­mek, hozzÃ¡fÃ©rÃ©s korlÃ¡tozÃ¡s)</li>
            <li class="done">Ã‰rtÃ©kesÃ­tÃ©sek (Sales pipeline)</li>
            <li class="done">Projektmenedzsment (Kanban, Gantt nÃ©zetek)</li>
            <li class="done">FeladatkezelÃ©s (ismÃ©tlÅ‘dÅ‘ feladatok virtuÃ¡lis generÃ¡lÃ¡ssal)</li>
            <li class="done">EsemÃ©nykezelÃ©s (rÃ©sztvevÅ‘k - belsÅ‘/kÃ¼lsÅ‘, email meghÃ­vÃ³k)</li>
            <li class="done">SzerzÅ‘dÃ©skezelÃ©s (verziÃ³kÃ¶vetÃ©s, lejÃ¡rat figyelmeztetÃ©s, multi-file)</li>
            <li class="done">DokumentumkezelÃ©s (multi-file, PDF elÅ‘nÃ©zet, verziÃ³kÃ¶vetÃ©s)</li>
            <li class="done">IdÅ‘kÃ¶vetÃ©s (Time Tracking)</li>
            <li class="done">JÃ³vÃ¡hagyÃ¡si workflow</li>
            <li class="done">AutomatizÃ¡ciÃ³ (szabÃ¡lyok, triggerek, akciÃ³k)</li>
            <li class="done">Dashboard (testreszabhatÃ³ widgetek, drag-drop)</li>
            <li class="done">NaptÃ¡r (nap/hÃ©t/hÃ³nap nÃ©zet, drag-drop Ã¡tÃ¼temezÃ©s)</li>
            <li class="done">Ã‰rtesÃ­tÃ©sek (real-time Supabase Realtime)</li>
            <li class="done">TÃ¶rzsadatok (Master Data) kategÃ³riÃ¡kba rendezve</li>
            <li class="done">NaplÃ³zÃ¡s (Audit Logs)</li>
            <li class="done">RendszerbeÃ¡llÃ­tÃ¡sok (2FA, account lock, email, pÃ©nznem formÃ¡zÃ¡s)</li>
            <li class="done">Riportok Ã©s export (PDF, Excel, CSV)</li>
            <li class="done">GlobÃ¡lis keresÃ©s (projektek, sales, partnerek, dokumentumok)</li>
            <li class="done">Kedvencek Ã©s cÃ­mkÃ©k</li>
            <li class="done">Bulk mÅ±veletek (tÃ¶meges tÃ¶rlÃ©s, stÃ¡tuszvÃ¡ltÃ¡s)</li>
            <li class="done">CSV/Excel import (partnerek, projektek, sales)</li>
            <li class="done">Dokumentum sablonok (vÃ¡ltozÃ³ helyettesÃ­tÃ©s)</li>
            <li class="done">MegjegyzÃ©sek rendszer (entitÃ¡sokhoz kapcsolva)</li>
        </ul>
    </div>

    <!-- ==================== 2. TECHNOLÃ“GIAI STACK ==================== -->
    <div class="section" id="tech-stack">
        <h2>2. TECHNOLÃ“GIAI STACK Ã‰S KÃ–RNYEZET</h2>
        
        <h3>2.1. Frontend</h3>
        <div class="tech-stack">
            <div class="tech-item">
                <strong>Framework</strong>
                React 18 + TypeScript + Vite
            </div>
            <div class="tech-item">
                <strong>UI Framework</strong>
                Tailwind CSS + shadcn/ui
            </div>
            <div class="tech-item">
                <strong>State Management</strong>
                TanStack Query (React Query) v5
            </div>
            <div class="tech-item">
                <strong>Routing</strong>
                React Router DOM v6
            </div>
            <div class="tech-item">
                <strong>i18n</strong>
                i18next + react-i18next (HU/EN)
            </div>
            <div class="tech-item">
                <strong>Forms</strong>
                React Hook Form + Zod validÃ¡ciÃ³
            </div>
            <div class="tech-item">
                <strong>Drag & Drop</strong>
                @dnd-kit/core + @dnd-kit/sortable
            </div>
            <div class="tech-item">
                <strong>Charts</strong>
                Recharts
            </div>
            <div class="tech-item">
                <strong>PDF Viewer</strong>
                react-pdf + pdfjs-dist
            </div>
            <div class="tech-item">
                <strong>Export</strong>
                jspdf + jspdf-autotable + xlsx + jszip
            </div>
            <div class="tech-item">
                <strong>Rich Text</strong>
                TipTap editor
            </div>
            <div class="tech-item">
                <strong>2FA</strong>
                otpauth + qrcode
            </div>
        </div>

        <h3>2.2. Backend (Lovable Cloud / Supabase)</h3>
        <div class="tech-stack">
            <div class="tech-item">
                <strong>AdatbÃ¡zis</strong>
                PostgreSQL 15+
            </div>
            <div class="tech-item">
                <strong>AutentikÃ¡ciÃ³</strong>
                Supabase Auth + TOTP 2FA
            </div>
            <div class="tech-item">
                <strong>API</strong>
                PostgREST (auto-generated)
            </div>
            <div class="tech-item">
                <strong>Real-time</strong>
                Supabase Realtime (postgres_changes + broadcast)
            </div>
            <div class="tech-item">
                <strong>Storage</strong>
                Supabase Storage (documents, branding buckets)
            </div>
            <div class="tech-item">
                <strong>Edge Functions</strong>
                Deno Runtime (19 funkciÃ³)
            </div>
            <div class="tech-item">
                <strong>Email</strong>
                Resend HTTP API
            </div>
        </div>

        <h3>2.3. FÅ‘bb KonfigurÃ¡ciÃ³k</h3>
        <div class="info-box">
            <strong>TanStack Query optimalizÃ¡ciÃ³:</strong><br>
            <code>staleTime: 5 perc</code> - Adatok frissnek tekintÃ©se<br>
            <code>gcTime: 30 perc</code> - Cache megtartÃ¡sa<br>
            <code>refetchOnWindowFocus: false</code> - Ablak fÃ³kuszra nem frissÃ­t
        </div>
        
        <div class="info-box">
            <strong>Lazy Loading:</strong><br>
            Minden oldal <code>React.lazy()</code> + <code>Suspense</code> fallback-kel tÃ¶ltÅ‘dik a gyorsabb initial load Ã©rdekÃ©ben.
        </div>
    </div>

    <!-- ==================== 3. ARCHITEKTÃšRA ==================== -->
    <div class="section" id="architecture">
        <h2>3. MAGAS SZINTÅ° ARCHITEKTÃšRA</h2>

        <h3>3.1. Logikai ArchitektÃºra</h3>
        <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND (React)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Pages     â”‚  â”‚ Components  â”‚  â”‚       Hooks             â”‚  â”‚
â”‚  â”‚  (29 oldal) â”‚  â”‚  (shared/ui)â”‚  â”‚ (47 custom hook)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                     â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                   â”‚ Supabase Client â”‚                           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOVABLE CLOUD (Supabase)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgREST  â”‚  â”‚  Realtime   â”‚  â”‚   Edge Functions        â”‚  â”‚
â”‚  â”‚  (Auto API) â”‚  â”‚  (WS)       â”‚  â”‚   (19 Deno function)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                â”‚                     â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    PostgreSQL                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚              RLS Policies (50+)                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              DB Functions (40+)                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              Triggers (15+)                         â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  Tables: profiles, companies, company_licenses,            â”‚  â”‚
â”‚  â”‚          user_companies, user_company_permissions,         â”‚  â”‚
â”‚  â”‚          partners, partner_addresses, partner_contacts,    â”‚  â”‚
â”‚  â”‚          projects, tasks, events, event_participants,      â”‚  â”‚
â”‚  â”‚          sales, contracts, contract_versions,              â”‚  â”‚
â”‚  â”‚          documents, document_files, time_entries,          â”‚  â”‚
â”‚  â”‚          approval_workflows, automation_rules/logs,        â”‚  â”‚
â”‚  â”‚          notifications, favorites, tags, entity_tags,      â”‚  â”‚
â”‚  â”‚          comments, dashboard_widgets, master_data,         â”‚  â”‚
â”‚  â”‚          postal_codes, system_settings, logs,              â”‚  â”‚
â”‚  â”‚          login_attempts, locked_accounts,                  â”‚  â”‚
â”‚  â”‚          session_2fa_verifications, two_factor_attempts,   â”‚  â”‚
â”‚  â”‚          two_factor_locks, user_recovery_codes             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Storage Buckets                       â”‚    â”‚
â”‚  â”‚  â€¢ documents (company/{id}/...)                          â”‚    â”‚
â”‚  â”‚  â€¢ branding (logos)                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Resend API    â”‚
                    â”‚   (Email)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </pre>

        <h3>3.2. Multi-Tenancy Modell</h3>
        <p>A rendszer <strong>soft multi-tenancy</strong> modellt hasznÃ¡l:</p>
        <ul>
            <li>Minden Ã¼zleti adat <code>company_id</code> oszloppal van szÅ±rve</li>
            <li>RLS policy-k biztosÃ­tjÃ¡k a vÃ¡llalatok kÃ¶zÃ¶tti adatszeparÃ¡ciÃ³t</li>
            <li>FelhasznÃ¡lÃ³k tÃ¶bb vÃ¡llalathoz is tartozhatnak (<code>user_companies</code>)</li>
            <li>VÃ¡llalatonkÃ©nt eltÃ©rÅ‘ jogosultsÃ¡gok (<code>user_company_permissions</code>)</li>
            <li>Super admin minden vÃ¡llalatot lÃ¡t, a tÃ¶bbi felhasznÃ¡lÃ³ csak a sajÃ¡tjait</li>
        </ul>

        <h3>3.3. FÅ‘ Komponensek</h3>
        <table>
            <thead><tr><th>Komponens</th><th>FelelÅ‘ssÃ©g</th></tr></thead>
            <tbody>
                <tr><td>AuthContext</td><td>Session kezelÃ©s, real-time session termination broadcast figyelÃ©se</td></tr>
                <tr><td>CompanyContext</td><td>AktÃ­v vÃ¡llalat kezelÃ©se, vÃ¡ltÃ¡s</td></tr>
                <tr><td>MainLayout</td><td>AppSidebar + TopBar wrapper</td></tr>
                <tr><td>AppSidebar</td><td>NavigÃ¡ciÃ³ (role/feature alapÃº szÅ±rÃ©s)</td></tr>
                <tr><td>TopBar</td><td>VÃ¡llalat vÃ¡lasztÃ³, keresÃ©s, Ã©rtesÃ­tÃ©sek, user menu</td></tr>
                <tr><td>ResizableTable</td><td>UniverzÃ¡lis tÃ¡blÃ¡zat komponens oszlop-kezelÃ©ssel</td></tr>
            </tbody>
        </table>
    </div>

    <!-- ==================== 4. AUTH Ã‰S SECURITY ==================== -->
    <div class="section" id="auth-security">
        <h2>4. AUTH Ã‰S SECURITY MODELL</h2>

        <h3>4.1. GlobÃ¡lis SzerepkÃ¶rÃ¶k (profiles.role)</h3>
        <p>A <code>profiles.role</code> mezÅ‘ <code>user_role</code> ENUM tÃ­pusÃº: <code>super_admin</code>, <code>admin</code>, <code>normal</code>, <code>viewer</code></p>

        <div class="status-box implemented">
            <span class="status-icon green">âœ“</span>
            <strong>super_admin:</strong><br>
            â€¢ Teljes hozzÃ¡fÃ©rÃ©s minden vÃ¡llalathoz Ã©s funkciÃ³hoz<br>
            â€¢ FelhasznÃ¡lÃ³k lÃ©trehozÃ¡sa, szerkesztÃ©se, tÃ¶rlÃ©se<br>
            â€¢ RendszerbeÃ¡llÃ­tÃ¡sok mÃ³dosÃ­tÃ¡sa<br>
            â€¢ VÃ¡llalatok Ã©s licencek kezelÃ©se<br>
            â€¢ Audit log megtekintÃ©se<br>
            â€¢ ZÃ¡rolt fiÃ³kok feloldÃ¡sa<br>
            â€¢ Active sessions kezelÃ©se (session termination)<br>
            â€¢ Resend API kulcs megtekintÃ©se (nem maszkolt)<br>
            â€¢ Licenc generÃ¡tor hasznÃ¡lata (/license-generator)
        </div>

        <div class="status-box implemented">
            <span class="status-icon green">âœ“</span>
            <strong>admin:</strong><br>
            â€¢ HozzÃ¡fÃ©rÃ©s a sajÃ¡t vÃ¡llalataihoz (user_companies alapjÃ¡n)<br>
            â€¢ VÃ¡llalatspecifikus jogosultsÃ¡gok (user_company_permissions)<br>
            â€¢ Licenc limitek betartÃ¡sa kÃ¶telezÅ‘<br>
            â€¢ JÃ³vÃ¡hagyÃ¡si kÃ©relmek elfogadÃ¡sa/elutasÃ­tÃ¡sa<br>
            â€¢ FelhasznÃ¡lÃ³k hozzÃ¡rendelÃ©se feladatokhoz, projektekhez
        </div>

        <div class="status-box implemented">
            <span class="status-icon green">âœ“</span>
            <strong>normal:</strong><br>
            â€¢ AlapÃ©rtelmezett felhasznÃ¡lÃ³i szerepkÃ¶r<br>
            â€¢ VÃ¡llalatspecifikus jogosultsÃ¡gok szerint<br>
            â€¢ <strong>Strict privacy model:</strong> csak sajÃ¡t profil lÃ¡thatÃ³<br>
            â€¢ Feladat/projekt hozzÃ¡rendelÃ©s: csak Super Admin Ã©s Company Admin teheti meg
        </div>

        <div class="status-box implemented">
            <span class="status-icon green">âœ“</span>
            <strong>viewer:</strong><br>
            â€¢ Csak olvasÃ¡si jogosultsÃ¡g<br>
            â€¢ Nem szÃ¡mÃ­t bele a licenc seat limitbe<br>
            â€¢ Export funkciÃ³k elÃ©rhetÅ‘k
        </div>

        <h3>4.2. VÃ¡llalat SzerepkÃ¶rÃ¶k (user_company_permissions.role)</h3>
        <p><code>company_role</code> ENUM: <code>ADMIN</code>, <code>NORMAL</code>, <code>VIEWER</code></p>
        <table>
            <thead><tr><th>SzerepkÃ¶r</th><th>JogosultsÃ¡gok</th><th>Seat fogyasztÃ¡s</th></tr></thead>
            <tbody>
                <tr><td><strong>ADMIN</strong></td><td>VÃ¡llalaton belÃ¼l minden adat kezelÃ©se, felhasznÃ¡lÃ³k hozzÃ¡rendelÃ©se, tÃ¶rzsadat szerkesztÃ©s (can_edit_master_data), jÃ³vÃ¡hagyÃ¡sok</td><td>Igen</td></tr>
                <tr><td><strong>NORMAL</strong></td><td>SajÃ¡t adatok + hozzÃ¡rendelt entitÃ¡sok kezelÃ©se, can_delete flag szerint tÃ¶rlÃ©si jog</td><td>Igen</td></tr>
                <tr><td><strong>VIEWER</strong></td><td>Csak olvasÃ¡s, nincs mÃ³dosÃ­tÃ¡si jog</td><td>Nem</td></tr>
            </tbody>
        </table>

        <h3>4.3. SpeciÃ¡lis JogosultsÃ¡g Flagek</h3>
        <ul>
            <li><code>can_delete</code> - Soft delete mÅ±velet engedÃ©lyezÃ©se</li>
            <li><code>can_view_logs</code> - Audit naplÃ³ megtekintÃ©se</li>
            <li><code>can_edit_master_data</code> - TÃ¶rzsadatok szerkesztÃ©se</li>
        </ul>

        <h3>4.4. Two-Factor Authentication (2FA)</h3>

        <h4>4.4.1. TOTP ImplementÃ¡ciÃ³</h4>
        <ul>
            <li>TOTP algoritmus (Time-based One-Time Password)</li>
            <li>Secret generÃ¡lÃ¡s: <code>generate_2fa_secret()</code> DB function (32 karakter Base32)</li>
            <li>QR kÃ³d generÃ¡lÃ¡s kliens oldalon (qrcode library)</li>
            <li>ValidÃ¡lÃ¡s: <code>verify-2fa-token</code> edge function (otpauth library)</li>
            <li>Recovery codes: 10 db egyszer hasznÃ¡latos kÃ³d (<code>user_recovery_codes</code> tÃ¡bla)</li>
        </ul>

        <h4>4.4.2. Session 2FA VerifikÃ¡ciÃ³</h4>
        <table>
            <thead><tr><th>TÃ¡bla/FunkciÃ³</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td><code>session_2fa_verifications</code></td><td>Sikeres 2FA utÃ¡n session_id + user_id + expires_at tÃ¡rolÃ¡sa</td></tr>
                <tr><td><code>is_2fa_verified(uid)</code></td><td>RLS-ben hasznÃ¡lt segÃ©dfÃ¼ggvÃ©ny - ellenÅ‘rzi van-e Ã©rvÃ©nyes 2FA session</td></tr>
                <tr><td><code>two_factor_session_duration_minutes</code></td><td>System setting, default: 720 perc (12 Ã³ra)</td></tr>
            </tbody>
        </table>

        <h4>4.4.3. 2FA Brute Force VÃ©delem</h4>
        <table>
            <thead><tr><th>TÃ¡bla</th><th>FunkciÃ³</th></tr></thead>
            <tbody>
                <tr><td><code>two_factor_attempts</code></td><td>Sikertelen 2FA prÃ³bÃ¡lkozÃ¡sok naplÃ³zÃ¡sa</td></tr>
                <tr><td><code>two_factor_locks</code></td><td>ZÃ¡rolÃ¡s tÃºl sok sikertelen prÃ³bÃ¡lkozÃ¡s utÃ¡n</td></tr>
                <tr><td><code>is_two_factor_locked(uid)</code></td><td>ZÃ¡rolÃ¡s ellenÅ‘rzÃ©se</td></tr>
                <tr><td><code>apply_two_factor_lock_if_needed()</code></td><td>Automatikus zÃ¡rolÃ¡s alkalmazÃ¡sa</td></tr>
            </tbody>
        </table>
        <div class="info-box">
            <strong>2FA beÃ¡llÃ­tÃ¡sok (system_settings):</strong><br>
            â€¢ <code>two_factor_max_attempts = 10</code><br>
            â€¢ <code>two_factor_window_minutes = 10</code><br>
            â€¢ <code>two_factor_lock_minutes = 10</code>
        </div>

        <h3>4.5. Account Lockout</h3>

        <h4>4.5.1. MÅ±kÃ¶dÃ©s</h4>
        <ol>
            <li>BejelentkezÃ©si kÃ­sÃ©rlet rÃ¶gzÃ­tÃ©se: <code>record_login_attempt()</code> RPC (rate limit: max 10/perc/IP)</li>
            <li>Sikertelen prÃ³bÃ¡lkozÃ¡sok szÃ¡mlÃ¡lÃ¡sa: <code>count_recent_failed_attempts()</code></li>
            <li>KÃ¼szÃ¶b tÃºllÃ©pÃ©sekor: <code>lock_account_for_email()</code> automatikus zÃ¡rolÃ¡s</li>
            <li>ZÃ¡rolÃ¡s Ã©rtesÃ­tÃ©s: <code>notify-account-lock</code> edge function</li>
            <li>Automatikus feloldÃ¡s: <code>locked_until</code> idÅ‘ letelte utÃ¡n</li>
            <li>ManuÃ¡lis feloldÃ¡s: Super Admin - <code>unlock_account_by_user_id()</code></li>
            <li>Sikeres login utÃ¡n: korÃ¡bbi sikertelen prÃ³bÃ¡lkozÃ¡sok tÃ¶rlÃ©se</li>
        </ol>

        <h4>4.5.2. BeÃ¡llÃ­tÃ¡sok</h4>
        <div class="info-box">
            <strong>Account lock beÃ¡llÃ­tÃ¡sok (system_settings):</strong><br>
            â€¢ <code>account_lock_attempts = 5</code> - Sikertelen prÃ³bÃ¡lkozÃ¡sok szÃ¡ma<br>
            â€¢ <code>account_lock_auto_unlock_minutes = 1</code> - Automatikus feloldÃ¡s ideje<br>
            â€¢ <code>account_lock_failed_attempts_window_minutes = 1</code> - IdÅ‘ablak a szÃ¡mlÃ¡lÃ¡shoz
        </div>

        <h4>4.5.3. Admin KezelÅ‘felÃ¼let</h4>
        <p>Account Management oldal (/account-management) - Super Admin only:</p>
        <ul>
            <li><strong>Active Sessions tab:</strong> AktÃ­v sessionÃ¶k listÃ¡ja, session termination (kick out)</li>
            <li><strong>Locked Accounts tab:</strong> ZÃ¡rolt fiÃ³kok, manuÃ¡lis feloldÃ¡s</li>
            <li><strong>Login Attempts tab:</strong> BejelentkezÃ©si elÅ‘zmÃ©nyek, szÅ±rÃ©s</li>
        </ul>

        <h3>4.6. Session KezelÃ©s</h3>

        <h4>4.6.1. Single Session Enforcement</h4>
        <p>BejelentkezÃ©skor minden korÃ¡bbi session lezÃ¡rÃ¡sra kerÃ¼l:</p>
        <pre>await supabase.auth.signOut({ scope: 'others' });</pre>

        <h4>4.6.2. Real-time Session Termination</h4>
        <p>Super Admin Ã¡ltal kezdemÃ©nyezett session termination broadcast-tal mÅ±kÃ¶dik:</p>
        <ol>
            <li>Admin meghÃ­vja a <code>terminate-user-session</code> edge function-t</li>
            <li>Edge function broadcast kÃ¼ld: <code>session-terminate-${userId}</code> channel</li>
            <li>AuthContext figyeli a channelt Ã©s azonnal kijelentkezteti a usert</li>
        </ol>

        <h4>4.6.3. Inactivity Logout</h4>
        <ul>
            <li>KonfigurÃ¡lhatÃ³ timeout: <code>inactivity_logout_minutes</code> (default: 5 perc)</li>
            <li><code>useInactivityLogout</code> hook figyeli a user aktivitÃ¡st</li>
            <li>Timeout esetÃ©n automatikus kijelentkeztetÃ©s</li>
        </ul>

        <h3>4.7. Password Policy</h3>
        <ul>
            <li><strong>KomplexitÃ¡s:</strong> Min 8 karakter, 1 nagybetÅ±, 1 kisbetÅ±, 1 szÃ¡m, 1 speciÃ¡lis karakter</li>
            <li><strong>LejÃ¡rat:</strong> 90 nap (konfigurÃ¡lhatÃ³: <code>password_expiry_days</code>)</li>
            <li><strong>LejÃ¡rt jelszÃ³:</strong> /change-password oldalra irÃ¡nyÃ­tÃ¡s</li>
            <li><strong>KÃ¶telezÅ‘ vÃ¡ltoztatÃ¡s:</strong> <code>must_change_password</code> flag</li>
            <li><strong>Pwned ellenÅ‘rzÃ©s:</strong> Supabase Auth beÃ©pÃ­tett funkciÃ³ja</li>
        </ul>

        <h3>4.8. Row Level Security (RLS)</h3>

        <h4>4.8.1. AlapvetÅ‘ RLS Pattern</h4>
        <pre>
-- SELECT policy pÃ©lda
CREATE POLICY "Users can view company data"
ON public.some_table
FOR SELECT
USING (
  is_super_admin(auth.uid()) 
  OR (
    is_2fa_verified(auth.uid())
    AND company_id IN (
      SELECT company_id 
      FROM user_companies 
      WHERE user_id = auth.uid()
    )
  )
);
        </pre>

        <h4>4.8.2. Fontos RLS SegÃ©dfÃ¼ggvÃ©nyek</h4>
        <table>
            <thead><tr><th>FÃ¼ggvÃ©ny</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td><code>is_super_admin(uid)</code></td><td>Super admin ellenÅ‘rzÃ©s profiles.role alapjÃ¡n</td></tr>
                <tr><td><code>is_admin(uid)</code></td><td>Admin szerepkÃ¶r ellenÅ‘rzÃ©s</td></tr>
                <tr><td><code>is_admin_or_above(uid)</code></td><td>Admin vagy super_admin</td></tr>
                <tr><td><code>is_2fa_verified(uid)</code></td><td>2FA session ellenÅ‘rzÃ©s</td></tr>
                <tr><td><code>is_company_admin_new(uid, company_id)</code></td><td>Adott vÃ¡llalatnÃ¡l admin-e</td></tr>
                <tr><td><code>can_user_delete_in_company(uid, company_id)</code></td><td>TÃ¶rlÃ©si jog ellenÅ‘rzÃ©s</td></tr>
                <tr><td><code>can_view_company_sensitive_data(uid, company_id)</code></td><td>Ã‰rzÃ©keny adatok (adÃ³szÃ¡m) megtekintÃ©se</td></tr>
                <tr><td><code>is_account_locked(uid)</code></td><td>FiÃ³k zÃ¡rolÃ¡s ellenÅ‘rzÃ©s</td></tr>
                <tr><td><code>is_company_license_effective(company_id)</code></td><td>Ã‰rvÃ©nyes licenc ellenÅ‘rzÃ©s</td></tr>
            </tbody>
        </table>
    </div>

    <!-- ==================== 5. ADATMODELL ==================== -->
    <div class="section" id="database">
        <h2>5. ADATMODELL / ADATBÃZIS SÃ‰MA</h2>

        <h3>5.1. FelhasznÃ¡lÃ³k Ã©s AutentikÃ¡ciÃ³</h3>

        <h4>profiles</h4>
        <p>FelhasznÃ¡lÃ³i profilok - <code>auth.users</code> kiterjesztÃ©se.</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>â†’ auth.users.id</td></tr>
                <tr><td>email</td><td>text NOT NULL</td><td>Email cÃ­m (unique)</td></tr>
                <tr><td>full_name</td><td>text</td><td>Teljes nÃ©v</td></tr>
                <tr><td>given_name</td><td>text</td><td>KeresztnÃ©v</td></tr>
                <tr><td>family_name</td><td>text</td><td>VezetÃ©knÃ©v</td></tr>
                <tr><td>user_code</td><td>text</td><td>RegisztrÃ¡ciÃ³s kÃ³d (8 karakter)</td></tr>
                <tr><td>role</td><td>user_role ENUM</td><td>super_admin, admin, normal, viewer</td></tr>
                <tr><td>is_active</td><td>boolean</td><td>AktÃ­v stÃ¡tusz (default: false)</td></tr>
                <tr><td>language</td><td>text</td><td>'en' vagy 'hu'</td></tr>
                <tr><td>default_company_id</td><td>uuid (FK)</td><td>â†’ companies.id</td></tr>
                <tr><td>must_change_password</td><td>boolean</td><td>KÃ¶telezÅ‘ jelszÃ³vÃ¡ltoztatÃ¡s flag</td></tr>
                <tr><td>password_changed_at</td><td>timestamptz</td><td>JelszÃ³ utolsÃ³ mÃ³dosÃ­tÃ¡s (90 napos lejÃ¡rat szÃ¡mÃ­tÃ¡shoz)</td></tr>
                <tr><td>can_delete</td><td>boolean</td><td>GlobÃ¡lis tÃ¶rlÃ©si jog</td></tr>
                <tr><td>can_view_logs</td><td>boolean</td><td>Audit log megtekintÃ©si jog</td></tr>
                <tr><td>two_factor_enabled</td><td>boolean</td><td>2FA bekapcsolva</td></tr>
                <tr><td>two_factor_secret</td><td>text</td><td>TOTP titkos kulcs (Base32)</td></tr>
                <tr><td>personal_task_color</td><td>text</td><td>SzemÃ©lyes feladat szÃ­n naptÃ¡rban</td></tr>
                <tr><td>personal_event_color</td><td>text</td><td>SzemÃ©lyes esemÃ©ny szÃ­n naptÃ¡rban</td></tr>
                <tr><td>invitation_token</td><td>text</td><td>MeghÃ­vÃ³ token</td></tr>
                <tr><td>invitation_sent_at</td><td>timestamptz</td><td>MeghÃ­vÃ³ kÃ¼ldÃ©s idÅ‘pontja</td></tr>
                <tr><td>invitation_expires_at</td><td>timestamptz</td><td>MeghÃ­vÃ³ lejÃ¡rat (24 Ã³ra)</td></tr>
                <tr><td>registered_at</td><td>timestamptz</td><td>RegisztrÃ¡ciÃ³ befejezÃ©se</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <h4>login_attempts</h4>
        <p>BejelentkezÃ©si kÃ­sÃ©rletek naplÃ³ja - <strong>biztonsÃ¡gos rÃ¶gzÃ­tÃ©s RPC-n keresztÃ¼l</strong>.</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>email</td><td>text NOT NULL</td><td>Email cÃ­m</td></tr>
                <tr><td>user_id</td><td>uuid (nullable)</td><td>â†’ auth.users (ha lÃ©tezik)</td></tr>
                <tr><td>success</td><td>boolean NOT NULL</td><td>Sikeres-e a kÃ­sÃ©rlet</td></tr>
                <tr><td>attempt_time</td><td>timestamptz</td><td>KÃ­sÃ©rlet idÅ‘pontja (default: now())</td></tr>
                <tr><td>ip_address</td><td>text</td><td>Kliens IP cÃ­me</td></tr>
                <tr><td>user_agent</td><td>text</td><td>BÃ¶ngÃ©szÅ‘ azonosÃ­tÃ³</td></tr>
            </tbody>
        </table>
        <div class="warning-box">
            <strong>BiztonsÃ¡gi megjegyzÃ©s:</strong> Nincs kÃ¶zvetlen INSERT RLS policy! Csak a <code>record_login_attempt()</code> SECURITY DEFINER RPC hasznÃ¡lhatÃ³, ami rate limiting-et is vÃ©gez (max 10 sikertelen/perc/IP).
        </div>

        <h4>locked_accounts</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>user_id</td><td>uuid NOT NULL UNIQUE</td><td>â†’ auth.users (egy rekord/user)</td></tr>
                <tr><td>locked_at</td><td>timestamptz</td><td>ZÃ¡rolÃ¡s idÅ‘pontja</td></tr>
                <tr><td>locked_until</td><td>timestamptz (nullable)</td><td>ZÃ¡rolÃ¡s vÃ©ge (NULL = permanens)</td></tr>
                <tr><td>locked_by_system</td><td>boolean</td><td>Automatikus zÃ¡rolÃ¡s-e</td></tr>
                <tr><td>reason</td><td>text</td><td>ZÃ¡rolÃ¡s oka</td></tr>
                <tr><td>unlocked_at</td><td>timestamptz</td><td>FeloldÃ¡s idÅ‘pontja</td></tr>
                <tr><td>unlocked_by</td><td>uuid (FK)</td><td>â†’ profiles (ki oldotta fel)</td></tr>
            </tbody>
        </table>

        <h4>session_2fa_verifications</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>user_id</td><td>uuid NOT NULL</td><td>â†’ auth.users</td></tr>
                <tr><td>session_id</td><td>text NOT NULL</td><td>JWT session azonosÃ­tÃ³</td></tr>
                <tr><td>verified_at</td><td>timestamptz</td><td>VerifikÃ¡ciÃ³ idÅ‘pontja</td></tr>
                <tr><td>expires_at</td><td>timestamptz NOT NULL</td><td>LejÃ¡rat idÅ‘pontja</td></tr>
            </tbody>
        </table>

        <h4>user_recovery_codes</h4>
        <p>2FA recovery kÃ³dok tÃ¡rolÃ¡sa (10 db/user, egyszer hasznÃ¡latos).</p>

        <h3>5.2. VÃ¡llalatok Ã©s Licencek</h3>

        <h4>companies</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>name</td><td>text NOT NULL</td><td>VÃ¡llalat neve</td></tr>
                <tr><td>tax_id</td><td>text</td><td>AdÃ³szÃ¡m (Ã©rzÃ©keny - companies_safe view)</td></tr>
                <tr><td>address</td><td>text</td><td>CÃ­m</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>
        <div class="info-box">
            <strong>companies_safe view:</strong> Tax_id mezÅ‘ elrejtÃ©se nem-admin felhasznÃ¡lÃ³k elÅ‘l. <code>can_view_company_sensitive_data()</code> fÃ¼ggvÃ©ny ellenÅ‘rzi a jogosultsÃ¡got.
        </div>

        <h4>company_licenses</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK, UNIQUE)</td><td>â†’ companies (1:1 kapcsolat)</td></tr>
                <tr><td>license_key</td><td>text</td><td>TitkosÃ­tott kulcs (12-bit nonce-szal)</td></tr>
                <tr><td>max_users</td><td>integer NOT NULL</td><td>Licencelt seat-ek szÃ¡ma</td></tr>
                <tr><td>valid_from</td><td>timestamptz NOT NULL</td><td>Ã‰rvÃ©nyessÃ©g kezdete</td></tr>
                <tr><td>valid_until</td><td>timestamptz NOT NULL</td><td>Ã‰rvÃ©nyessÃ©g vÃ©ge</td></tr>
                <tr><td>is_active</td><td>boolean</td><td>AktÃ­v stÃ¡tusz</td></tr>
                <tr><td>features</td><td>jsonb</td><td>EngedÃ©lyezett modulok tÃ¶mbje</td></tr>
            </tbody>
        </table>
        <div class="info-box">
            <strong>Features Ã©rtÃ©kek:</strong> ["partners", "projects", "sales", "documents", "calendar", "my_items", "audit"]<br>
            <strong>Seat szÃ¡mÃ­tÃ¡s:</strong> <code>get_company_used_seats()</code> - ADMIN Ã©s NORMAL role-Ãº aktÃ­v userek szÃ¡ma (viewer nem szÃ¡mÃ­t)
        </div>

        <h4>user_companies</h4>
        <p>FelhasznÃ¡lÃ³-vÃ¡llalat Ã¶sszerendelÃ©s (N:M kapcsolat).</p>

        <h4>user_company_permissions</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>user_id</td><td>uuid (FK)</td><td>â†’ profiles</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>â†’ companies</td></tr>
                <tr><td>role</td><td>company_role ENUM</td><td>ADMIN, NORMAL, VIEWER</td></tr>
                <tr><td>can_delete</td><td>boolean</td><td>TÃ¶rlÃ©si jog vÃ¡llalatnÃ¡l</td></tr>
                <tr><td>can_view_logs</td><td>boolean</td><td>NaplÃ³ megtekintÃ©s vÃ¡llalatnÃ¡l</td></tr>
                <tr><td>can_edit_master_data</td><td>boolean</td><td>TÃ¶rzsadat szerkesztÃ©s</td></tr>
            </tbody>
        </table>

        <h3>5.3. Partnerek</h3>

        <h4>partners</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies (vÃ¡llalat scope)</td></tr>
                <tr><td>name</td><td>text NOT NULL</td><td>Partner neve</td></tr>
                <tr><td>tax_id</td><td>text NOT NULL</td><td>Magyar adÃ³szÃ¡m (xxxxxxxx-x-xx) - <strong>KÃ–TELEZÅ</strong></td></tr>
                <tr><td>eu_vat_number</td><td>text</td><td>EU ÃFA szÃ¡m (opcionÃ¡lis)</td></tr>
                <tr><td>email</td><td>text</td><td>Email cÃ­m</td></tr>
                <tr><td>phone</td><td>text</td><td>TelefonszÃ¡m</td></tr>
                <tr><td>default_currency</td><td>text</td><td>AlapÃ©rtelmezett deviza</td></tr>
                <tr><td>category</td><td>text</td><td>â†’ master_data (partner_category)</td></tr>
                <tr><td>notes</td><td>text</td><td>MegjegyzÃ©sek</td></tr>
                <tr><td>restrict_access</td><td>boolean</td><td>KorlÃ¡tozott hozzÃ¡fÃ©rÃ©s flag</td></tr>
                <tr><td>parent_partner_id</td><td>uuid (FK)</td><td>SzÃ¼lÅ‘ partner (mezÅ‘ megmaradt, de <strong>FUNKCIÃ“ ELTÃVOLÃTVA</strong>)</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <div class="warning-box">
            <strong>AdÃ³szÃ¡m validÃ¡ciÃ³:</strong><br>
            â€¢ FormÃ¡tum: xxxxxxxx-x-xx (11 szÃ¡mjegy)<br>
            â€¢ EllenÅ‘rzÅ‘ szÃ¡mjegy: pozÃ­ciÃ³ 1-7 sÃºlyok (9,7,3,1,9,7,3) modulo 10<br>
            â€¢ ÃFA kÃ³d (9. pozÃ­ciÃ³): 1-5 kÃ¶zÃ¶tti Ã©rtÃ©k<br>
            â€¢ RegionÃ¡lis kÃ³d (10-11. pozÃ­ciÃ³): Ã©rvÃ©nyes NAV hivatal kÃ³dok
        </div>

        <div class="removed-box">
            <strong>ELTÃVOLÃTOTT FUNKCIÃ“:</strong> Anya-leÃ¡nyvÃ¡llalat kapcsolat (parent-subsidiary) - user dÃ¶ntÃ©s alapjÃ¡n eltÃ¡volÃ­tva. A <code>parent_partner_id</code> mezÅ‘ megmaradt az adatbÃ¡zisban, de a funkciÃ³ nem mÅ±kÃ¶dik.
        </div>

        <h4>partner_addresses</h4>
        <p>HÃ¡romszintÅ± cÃ­mrendszer: headquarters (szÃ©khely - kÃ¶telezÅ‘), site (telephely - opcionÃ¡lis), mailing (levelezÃ©si - opcionÃ¡lis).</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>partner_id</td><td>uuid (FK) NOT NULL</td><td>â†’ partners</td></tr>
                <tr><td>address_type</td><td>text NOT NULL</td><td>'headquarters', 'site', 'mailing'</td></tr>
                <tr><td>postal_code</td><td>text</td><td>IrÃ¡nyÃ­tÃ³szÃ¡m (â†’ postal_codes lookup)</td></tr>
                <tr><td>city</td><td>text</td><td>VÃ¡ros/TelepÃ¼lÃ©s</td></tr>
                <tr><td>county</td><td>text</td><td>Megye (Budapest = "-")</td></tr>
                <tr><td>country</td><td>text</td><td>OrszÃ¡g</td></tr>
                <tr><td>street_name</td><td>text</td><td>UtcanÃ©v</td></tr>
                <tr><td>street_type</td><td>text</td><td>KÃ¶zterÃ¼let tÃ­pusa (â†’ master_data)</td></tr>
                <tr><td>house_number</td><td>text</td><td>HÃ¡zszÃ¡m</td></tr>
                <tr><td>building</td><td>text</td><td>Ã‰pÃ¼let</td></tr>
                <tr><td>staircase</td><td>text</td><td>LÃ©pcsÅ‘hÃ¡z</td></tr>
                <tr><td>floor_door</td><td>text</td><td>Emelet/ajtÃ³</td></tr>
                <tr><td>plot_number</td><td>text</td><td>Helyrajzi szÃ¡m</td></tr>
            </tbody>
        </table>

        <h4>partner_contacts</h4>
        <p>KapcsolattartÃ³k kezelÃ©se partnerenkÃ©nt.</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>partner_id</td><td>uuid (FK) NOT NULL</td><td>â†’ partners</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>name</td><td>text NOT NULL</td><td>KapcsolattartÃ³ neve</td></tr>
                <tr><td>position</td><td>text</td><td>PozÃ­ciÃ³/beosztÃ¡s</td></tr>
                <tr><td>email</td><td>text</td><td>Email cÃ­m</td></tr>
                <tr><td>phone</td><td>text</td><td>TelefonszÃ¡m</td></tr>
                <tr><td>is_primary</td><td>boolean</td><td>ElsÅ‘dleges kapcsolattartÃ³</td></tr>
                <tr><td>notes</td><td>text</td><td>MegjegyzÃ©sek</td></tr>
            </tbody>
        </table>

        <h4>partner_user_access</h4>
        <p>FelhasznÃ¡lÃ³i hozzÃ¡fÃ©rÃ©s korlÃ¡tozÃ¡sa partnerekhez (restrict_access = true esetÃ©n).</p>

        <h3>5.4. Projektek, Feladatok, EsemÃ©nyek</h3>

        <h4>projects</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>code</td><td>text</td><td>Projekt azonosÃ­tÃ³ kÃ³d</td></tr>
                <tr><td>name</td><td>text NOT NULL</td><td>Projekt neve</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>status</td><td>text</td><td>â†’ master_data (project_status)</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>â†’ partners (Ã¼gyfÃ©l)</td></tr>
                <tr><td>owner_user_id</td><td>uuid (FK)</td><td>â†’ profiles (projekt tulajdonos)</td></tr>
                <tr><td>responsible1_user_id</td><td>uuid (FK)</td><td>â†’ profiles (1. felelÅ‘s)</td></tr>
                <tr><td>responsible2_user_id</td><td>uuid (FK)</td><td>â†’ profiles (2. felelÅ‘s)</td></tr>
                <tr><td>task_color</td><td>text</td><td>Projekt feladatok szÃ­ne naptÃ¡rban</td></tr>
                <tr><td>event_color</td><td>text</td><td>Projekt esemÃ©nyek szÃ­ne naptÃ¡rban</td></tr>
                <tr><td>start_date, end_date</td><td>date</td><td>Projekt idÅ‘szak</td></tr>
                <tr><td>budget</td><td>numeric</td><td>KÃ¶ltsÃ©gkeret</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <h4>tasks</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>project_id</td><td>uuid (FK)</td><td>â†’ projects (nullable)</td></tr>
                <tr><td>sales_id</td><td>uuid (FK)</td><td>â†’ sales (nullable)</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>â†’ partners (nullable)</td></tr>
                <tr><td>title</td><td>text NOT NULL</td><td>Feladat cÃ­me</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>status</td><td>text</td><td>â†’ master_data (task_status)</td></tr>
                <tr><td>responsible_user_id</td><td>uuid (FK)</td><td>â†’ profiles (felelÅ‘s)</td></tr>
                <tr><td>created_by</td><td>uuid (FK) NOT NULL</td><td>â†’ profiles (lÃ©trehozÃ³)</td></tr>
                <tr><td>deadline</td><td>timestamptz NOT NULL</td><td>HatÃ¡ridÅ‘ (<strong>KÃ–TELEZÅ</strong>)</td></tr>
                <tr><td>is_all_day</td><td>boolean</td><td>EgÃ©sz napos feladat</td></tr>
                <tr><td>recurrence_type</td><td>text</td><td>none, daily, weekly, monthly, yearly</td></tr>
                <tr><td>recurrence_interval</td><td>integer</td><td>IsmÃ©tlÅ‘dÃ©s gyakorisÃ¡g (pl. minden 2. hÃ©t)</td></tr>
                <tr><td>recurrence_end_date</td><td>date</td><td>IsmÃ©tlÅ‘dÃ©s vÃ©ge</td></tr>
                <tr><td>parent_task_id</td><td>uuid (FK)</td><td>SzÃ¼lÅ‘ feladat (virtuÃ¡lis elÅ‘fordulÃ¡sokhoz)</td></tr>
                <tr><td>occurrence_date</td><td>date</td><td>VirtuÃ¡lis elÅ‘fordulÃ¡s dÃ¡tuma</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <h4>events</h4>
        <p>EsemÃ©nyek - <strong>kÃ¼lÃ¶n tÃ¡bla a feladatoktÃ³l</strong>, rÃ©sztvevÅ‘-kezelÃ©ssel.</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>title</td><td>text NOT NULL</td><td>EsemÃ©ny cÃ­me</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>start_time</td><td>timestamptz NOT NULL</td><td>KezdÃ©s idÅ‘pontja</td></tr>
                <tr><td>end_time</td><td>timestamptz NOT NULL</td><td>BefejezÃ©s idÅ‘pontja (<strong>KÃ–TELEZÅ</strong>)</td></tr>
                <tr><td>is_all_day</td><td>boolean</td><td>EgÃ©sz napos esemÃ©ny</td></tr>
                <tr><td>location</td><td>text</td><td>HelyszÃ­n</td></tr>
                <tr><td>project_id</td><td>uuid (FK)</td><td>â†’ projects (nullable)</td></tr>
                <tr><td>sales_id</td><td>uuid (FK)</td><td>â†’ sales (nullable)</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>â†’ partners (nullable)</td></tr>
                <tr><td>responsible_user_id</td><td>uuid (FK)</td><td>â†’ profiles (felelÅ‘s)</td></tr>
                <tr><td>created_by</td><td>uuid (FK) NOT NULL</td><td>â†’ profiles (lÃ©trehozÃ³)</td></tr>
                <tr><td>recurrence_type, recurrence_interval, recurrence_end_date</td><td>mixed</td><td>IsmÃ©tlÅ‘dÃ©s beÃ¡llÃ­tÃ¡sok</td></tr>
                <tr><td>parent_event_id, occurrence_date</td><td>uuid/date</td><td>VirtuÃ¡lis elÅ‘fordulÃ¡sokhoz</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <h4>event_participants</h4>
        <p>EsemÃ©ny rÃ©sztvevÅ‘k (belsÅ‘ Ã©s kÃ¼lsÅ‘ meghÃ­vottak).</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>event_id</td><td>uuid (FK) NOT NULL</td><td>â†’ events</td></tr>
                <tr><td>user_id</td><td>uuid (FK)</td><td>â†’ profiles (belsÅ‘ rÃ©sztvevÅ‘)</td></tr>
                <tr><td>external_email</td><td>text</td><td>KÃ¼lsÅ‘ rÃ©sztvevÅ‘ email</td></tr>
                <tr><td>external_name</td><td>text</td><td>KÃ¼lsÅ‘ rÃ©sztvevÅ‘ neve</td></tr>
                <tr><td>status</td><td>text</td><td>invited, accepted, declined, tentative</td></tr>
                <tr><td>notified_at</td><td>timestamptz</td><td>Ã‰rtesÃ­tÃ©s kÃ¼ldÃ©se</td></tr>
                <tr><td>responded_at</td><td>timestamptz</td><td>VÃ¡lasz idÅ‘pontja</td></tr>
            </tbody>
        </table>

        <h3>5.5. Ã‰rtÃ©kesÃ­tÃ©sek</h3>

        <h4>sales</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>name</td><td>text NOT NULL</td><td>Ã‰rtÃ©kesÃ­tÃ©s neve</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>â†’ partners (Ã¼gyfÃ©l)</td></tr>
                <tr><td>status</td><td>text</td><td>â†’ master_data (sale_status)</td></tr>
                <tr><td>expected_value</td><td>numeric</td><td>VÃ¡rhatÃ³ Ã©rtÃ©k</td></tr>
                <tr><td>currency</td><td>text</td><td>Deviza</td></tr>
                <tr><td>probability</td><td>integer</td><td>ValÃ³szÃ­nÅ±sÃ©g %</td></tr>
                <tr><td>expected_close_date</td><td>date</td><td>VÃ¡rhatÃ³ lezÃ¡rÃ¡si dÃ¡tum</td></tr>
                <tr><td>business_unit</td><td>text</td><td>ÃœzletÃ¡g</td></tr>
                <tr><td>owner_user_id</td><td>uuid (FK)</td><td>â†’ profiles (felelÅ‘s)</td></tr>
                <tr><td>notes</td><td>text</td><td>MegjegyzÃ©sek</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <h3>5.6. SzerzÅ‘dÃ©sek Ã©s VerziÃ³k</h3>

        <h4>contracts</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>owner_company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>title</td><td>text NOT NULL</td><td>SzerzÅ‘dÃ©s cÃ­me</td></tr>
                <tr><td>contract_number</td><td>text</td><td>SzerzÅ‘dÃ©s azonosÃ­tÃ³</td></tr>
                <tr><td>contract_type</td><td>text</td><td>â†’ master_data (contract_type)</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>status</td><td>text</td><td>draft, active, expired, terminated</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>â†’ partners (szerzÅ‘dÅ‘ fÃ©l)</td></tr>
                <tr><td>project_id</td><td>uuid (FK)</td><td>â†’ projects (kapcsolÃ³dÃ³ projekt)</td></tr>
                <tr><td>sales_id</td><td>uuid (FK)</td><td>â†’ sales (kapcsolÃ³dÃ³ Ã©rtÃ©kesÃ­tÃ©s)</td></tr>
                <tr><td>signed_date</td><td>date</td><td>AlÃ¡Ã­rÃ¡s dÃ¡tuma</td></tr>
                <tr><td>effective_date</td><td>date</td><td>HatÃ¡lyba lÃ©pÃ©s</td></tr>
                <tr><td>expiry_date</td><td>date</td><td>LejÃ¡rat dÃ¡tuma</td></tr>
                <tr><td>total_value</td><td>numeric</td><td>SzerzÅ‘dÃ©s Ã©rtÃ©ke</td></tr>
                <tr><td>currency</td><td>text</td><td>Deviza (default: HUF)</td></tr>
                <tr><td>payment_frequency</td><td>text</td><td>monthly, quarterly, annually, one-time</td></tr>
                <tr><td>payment_day</td><td>integer</td><td>FizetÃ©si nap (hÃ³ napja)</td></tr>
                <tr><td>billing_start_date</td><td>date</td><td>SzÃ¡mlÃ¡zÃ¡s kezdete</td></tr>
                <tr><td>auto_renewal</td><td>boolean</td><td>Automatikus megÃºjÃ­tÃ¡s</td></tr>
                <tr><td>renewal_period_months</td><td>integer</td><td>MegÃºjÃ­tÃ¡si idÅ‘szak hÃ³napokban</td></tr>
                <tr><td>termination_notice_days</td><td>integer</td><td>FelmondÃ¡si idÅ‘ napokban</td></tr>
                <tr><td>expiry_warning_days</td><td>integer</td><td>LejÃ¡rat figyelmeztetÃ©s (default: 30)</td></tr>
                <tr><td>renewal_warning_days</td><td>integer</td><td>MegÃºjÃ­tÃ¡s figyelmeztetÃ©s (default: 45)</td></tr>
                <tr><td>termination_warning_days</td><td>integer</td><td>FelmondÃ¡s figyelmeztetÃ©s (default: 60)</td></tr>
                <tr><td>restrict_access</td><td>boolean</td><td>KorlÃ¡tozott hozzÃ¡fÃ©rÃ©s</td></tr>
                <tr><td>created_by</td><td>uuid (FK)</td><td>â†’ profiles (lÃ©trehozÃ³)</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <h4>contract_versions</h4>
        <p>SzerzÅ‘dÃ©s verziÃ³k - minden mÃ³dosÃ­tÃ¡s Ãºj verziÃ³, visszaÃ¡llÃ­tÃ¡si lehetÅ‘sÃ©g (admin only).</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>contract_id</td><td>uuid (FK) NOT NULL</td><td>â†’ contracts</td></tr>
                <tr><td>version_number</td><td>integer</td><td>VerziÃ³szÃ¡m</td></tr>
                <tr><td>is_current</td><td>boolean</td><td>AktuÃ¡lis verziÃ³-e</td></tr>
                <tr><td>title</td><td>text NOT NULL</td><td>VerziÃ³ cÃ­me</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>change_summary</td><td>text</td><td>VÃ¡ltozÃ¡sok Ã¶sszefoglalÃ³ja</td></tr>
                <tr><td>file_path</td><td>text</td><td>Storage path</td></tr>
                <tr><td>file_size</td><td>integer</td><td>FÃ¡jl mÃ©ret (byte)</td></tr>
                <tr><td>mime_type</td><td>text</td><td>MIME tÃ­pus</td></tr>
                <tr><td>original_file_id</td><td>uuid (FK)</td><td>â†’ contract_versions (eredeti fÃ¡jl)</td></tr>
                <tr><td>created_by</td><td>uuid (FK)</td><td>â†’ profiles</td></tr>
                <tr><td>created_at</td><td>timestamptz</td><td>LÃ©trehozÃ¡s idÅ‘pontja</td></tr>
            </tbody>
        </table>

        <h4>contract_user_access</h4>
        <p>FelhasznÃ¡lÃ³i hozzÃ¡fÃ©rÃ©s korlÃ¡tozÃ¡sa szerzÅ‘dÃ©sekhez.</p>

        <h3>5.7. Dokumentumok Ã©s FÃ¡jlok</h3>

        <h4>documents</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>owner_company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>title</td><td>text NOT NULL</td><td>Dokumentum cÃ­me</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>visibility</td><td>text NOT NULL</td><td>COMPANY_ONLY, PROJECT_ONLY, SALES_ONLY, PUBLIC</td></tr>
                <tr><td>partner_id</td><td>uuid (FK)</td><td>â†’ partners</td></tr>
                <tr><td>project_id</td><td>uuid (FK)</td><td>â†’ projects</td></tr>
                <tr><td>sales_id</td><td>uuid (FK)</td><td>â†’ sales</td></tr>
                <tr><td>uploaded_by</td><td>uuid (FK)</td><td>â†’ profiles</td></tr>
                <tr><td>uploaded_at</td><td>timestamptz</td><td>FeltÃ¶ltÃ©s idÅ‘pontja</td></tr>
                <tr><td>created_at, updated_at, deleted_at</td><td>timestamptz</td><td>Audit idÅ‘bÃ©lyegek</td></tr>
            </tbody>
        </table>

        <h4>document_files</h4>
        <p>Multi-file tÃ¡mogatÃ¡s dokumentumonkÃ©nt, verziÃ³kÃ¶vetÃ©ssel.</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>document_id</td><td>uuid (FK) NOT NULL</td><td>â†’ documents</td></tr>
                <tr><td>file_name</td><td>text NOT NULL</td><td>FÃ¡jlnÃ©v</td></tr>
                <tr><td>file_path</td><td>text NOT NULL</td><td>Storage path</td></tr>
                <tr><td>file_size</td><td>integer</td><td>FÃ¡jl mÃ©ret (byte)</td></tr>
                <tr><td>mime_type</td><td>text</td><td>MIME tÃ­pus</td></tr>
                <tr><td>version</td><td>integer</td><td>VerziÃ³szÃ¡m</td></tr>
                <tr><td>is_current</td><td>boolean</td><td>AktuÃ¡lis verziÃ³-e</td></tr>
                <tr><td>original_file_id</td><td>uuid (FK)</td><td>â†’ document_files (eredeti fÃ¡jl)</td></tr>
                <tr><td>uploaded_by</td><td>uuid (FK)</td><td>â†’ profiles</td></tr>
                <tr><td>uploaded_at</td><td>timestamptz</td><td>FeltÃ¶ltÃ©s idÅ‘pontja</td></tr>
            </tbody>
        </table>

        <h4>document_templates</h4>
        <p>Dokumentum sablonok vÃ¡ltozÃ³ helyettesÃ­tÃ©ssel.</p>

        <h3>5.8. IdÅ‘kÃ¶vetÃ©s</h3>

        <h4>time_entries</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>user_id</td><td>uuid (FK) NOT NULL</td><td>â†’ profiles (ki mÃ©rte)</td></tr>
                <tr><td>task_id</td><td>uuid (FK) NOT NULL</td><td>â†’ tasks (melyik feladathoz)</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>start_time</td><td>timestamptz NOT NULL</td><td>KezdÃ©s</td></tr>
                <tr><td>end_time</td><td>timestamptz</td><td>BefejezÃ©s (NULL ha fut)</td></tr>
                <tr><td>duration_minutes</td><td>integer</td><td>IdÅ‘tartam percben (szÃ¡mÃ­tott)</td></tr>
                <tr><td>is_running</td><td>boolean</td><td>AktÃ­v timer-e</td></tr>
                <tr><td>created_at</td><td>timestamptz</td><td>LÃ©trehozÃ¡s idÅ‘pontja</td></tr>
            </tbody>
        </table>
        <div class="info-box">
            <strong>KorlÃ¡tozÃ¡s:</strong> Egy felhasznÃ¡lÃ³nak egyszerre csak egy aktÃ­v (is_running = true) time entry-je lehet.
        </div>

        <h3>5.9. JÃ³vÃ¡hagyÃ¡s Ã©s AutomatizÃ¡ciÃ³</h3>

        <h4>approval_workflows</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>entity_type</td><td>text NOT NULL</td><td>contract, document, project</td></tr>
                <tr><td>entity_id</td><td>uuid NOT NULL</td><td>EntitÃ¡s azonosÃ­tÃ³</td></tr>
                <tr><td>status</td><td>text</td><td>pending, approved, rejected</td></tr>
                <tr><td>requested_by</td><td>uuid (FK) NOT NULL</td><td>â†’ profiles (kÃ©relmezÅ‘)</td></tr>
                <tr><td>approved_by</td><td>uuid (FK)</td><td>â†’ profiles (jÃ³vÃ¡hagyÃ³)</td></tr>
                <tr><td>approved_at</td><td>timestamptz</td><td>JÃ³vÃ¡hagyÃ¡s/elutasÃ­tÃ¡s idÅ‘pontja</td></tr>
                <tr><td>rejection_reason</td><td>text</td><td>ElutasÃ­tÃ¡s indoka (kÃ¶telezÅ‘ elutasÃ­tÃ¡snÃ¡l)</td></tr>
                <tr><td>notes</td><td>text</td><td>MegjegyzÃ©sek</td></tr>
            </tbody>
        </table>

        <h4>automation_rules</h4>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>company_id</td><td>uuid (FK) NOT NULL</td><td>â†’ companies</td></tr>
                <tr><td>name</td><td>text NOT NULL</td><td>SzabÃ¡ly neve</td></tr>
                <tr><td>description</td><td>text</td><td>LeÃ­rÃ¡s</td></tr>
                <tr><td>trigger_type</td><td>text NOT NULL</td><td>Trigger tÃ­pus</td></tr>
                <tr><td>trigger_config</td><td>jsonb</td><td>Trigger konfigurÃ¡ciÃ³</td></tr>
                <tr><td>action_type</td><td>text NOT NULL</td><td>AkciÃ³ tÃ­pus</td></tr>
                <tr><td>action_config</td><td>jsonb</td><td>AkciÃ³ konfigurÃ¡ciÃ³</td></tr>
                <tr><td>is_active</td><td>boolean</td><td>AktÃ­v-e</td></tr>
                <tr><td>created_by</td><td>uuid (FK)</td><td>â†’ profiles</td></tr>
            </tbody>
        </table>

        <div class="info-box">
            <strong>Trigger tÃ­pusok:</strong> task_status_change, task_created, deadline_approaching, project_status_change, sales_status_change, contract_expiring<br><br>
            <strong>AkciÃ³ tÃ­pusok:</strong> send_notification, change_status, assign_user, create_task, send_email
        </div>

        <h4>automation_logs</h4>
        <p>AutomatizÃ¡ciÃ³ vÃ©grehajtÃ¡si naplÃ³ (success, error_message, trigger_data, action_result).</p>

        <h3>5.10. Rendszer TÃ¡blÃ¡k</h3>

        <h4>master_data</h4>
        <p>TÃ¶rzsadatok - dinamikus tÃ­pusok kategÃ³riÃ¡kba rendezve.</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>type</td><td>text NOT NULL</td><td>TÃ­pus azonosÃ­tÃ³</td></tr>
                <tr><td>value</td><td>text NOT NULL</td><td>Ã‰rtÃ©k (DB-ben tÃ¡rolva)</td></tr>
                <tr><td>label</td><td>text NOT NULL</td><td>MegjelenÃ­tendÅ‘ cÃ­mke</td></tr>
                <tr><td>order_index</td><td>integer</td><td>RendezÃ©si sorrend</td></tr>
                <tr><td>is_default</td><td>boolean</td><td>AlapÃ©rtelmezett-e</td></tr>
            </tbody>
        </table>
        <div class="info-box">
            <strong>TÃ¶rzsadat tÃ­pusok kategÃ³riÃ¡i (Settings > TÃ¶rzsadatok):</strong><br>
            â€¢ <strong>Partnerek:</strong> partner_category<br>
            â€¢ <strong>Projektek:</strong> project_status<br>
            â€¢ <strong>Ã‰rtÃ©kesÃ­tÃ©s:</strong> sale_status<br>
            â€¢ <strong>SzerzÅ‘dÃ©sek:</strong> contract_type, payment_frequency<br>
            â€¢ <strong>Feladatok:</strong> task_status<br>
            â€¢ <strong>EgyÃ©b:</strong> currency, cost_category, country, county, street_type
        </div>

        <h4>postal_codes (~4000 rekord)</h4>
        <p>Magyar irÃ¡nyÃ­tÃ³szÃ¡mok, telepÃ¼lÃ©sek, megyÃ©k a cÃ­m kitÃ¶ltÃ©shez.</p>

        <h4>notifications</h4>
        <p>Real-time Ã©rtesÃ­tÃ©sek (Supabase Realtime). TÃ­pusok: task, deadline, automation, approval, system.</p>

        <h4>favorites</h4>
        <p>FelhasznÃ¡lÃ³nkÃ©nti kedvencek (projektek, sales, szerzÅ‘dÃ©sek, partnerek, dokumentumok).</p>

        <h4>tags + entity_tags</h4>
        <p>VÃ¡llalat-szintÅ± cÃ­mkÃ©k tetszÅ‘leges entitÃ¡sokhoz.</p>
        <div class="warning-box">
            <strong>CÃ­mke tÃ¶rlÃ©si korlÃ¡tozÃ¡s:</strong> CÃ­mke csak akkor tÃ¶rÃ¶lhetÅ‘, ha nincs egyetlen entitÃ¡shoz sem hozzÃ¡rendelve (usageCount = 0).
        </div>

        <h4>comments</h4>
        <p>MegjegyzÃ©sek entitÃ¡sokhoz (entity_type, entity_id). SzerkesztÃ©s/tÃ¶rlÃ©s csak szerzÅ‘ Ã¡ltal.</p>
        <div class="info-box">
            <strong>Soft delete:</strong> <code>soft_delete_comment(comment_id)</code> SECURITY DEFINER RPC fÃ¼ggvÃ©nyen keresztÃ¼l (RLS bypass).
        </div>

        <h4>dashboard_widgets</h4>
        <p>FelhasznÃ¡lÃ³nkÃ©nti widget beÃ¡llÃ­tÃ¡sok (visibility, position, width).</p>

        <h4>system_settings</h4>
        <p>RendszerszintÅ± beÃ¡llÃ­tÃ¡sok kulcs-Ã©rtÃ©k pÃ¡rokkÃ©nt.</p>
        <table>
            <thead><tr><th>Kulcs</th><th>TÃ­pus</th><th>Default</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>account_lock_attempts</td><td>integer</td><td>5</td><td>Max sikertelen prÃ³bÃ¡lkozÃ¡s</td></tr>
                <tr><td>account_lock_auto_unlock_minutes</td><td>integer</td><td>1</td><td>Auto unlock idÅ‘</td></tr>
                <tr><td>account_lock_failed_attempts_window_minutes</td><td>integer</td><td>1</td><td>IdÅ‘ablak</td></tr>
                <tr><td>two_factor_session_duration_minutes</td><td>integer</td><td>720</td><td>2FA session hossza</td></tr>
                <tr><td>two_factor_max_attempts</td><td>integer</td><td>10</td><td>Max 2FA prÃ³bÃ¡lkozÃ¡s</td></tr>
                <tr><td>two_factor_window_minutes</td><td>integer</td><td>10</td><td>2FA idÅ‘ablak</td></tr>
                <tr><td>two_factor_lock_minutes</td><td>integer</td><td>10</td><td>2FA lock idÅ‘</td></tr>
                <tr><td>password_expiry_days</td><td>integer</td><td>90</td><td>JelszÃ³ lejÃ¡rat</td></tr>
                <tr><td>inactivity_logout_minutes</td><td>integer</td><td>5</td><td>InaktivitÃ¡s timeout</td></tr>
                <tr><td>use_browser_locale</td><td>boolean</td><td>true</td><td>BÃ¶ngÃ©szÅ‘ locale hasznÃ¡lata</td></tr>
                <tr><td>thousand_separator</td><td>text</td><td>" "</td><td>Ezres elvÃ¡lasztÃ³</td></tr>
                <tr><td>decimal_separator</td><td>text</td><td>","</td><td>Tizedes elvÃ¡lasztÃ³</td></tr>
                <tr><td>resend_api_key</td><td>text</td><td>-</td><td>Resend API kulcs</td></tr>
                <tr><td>email_from_address</td><td>text</td><td>onboarding@resend.dev</td><td>KÃ¼ldÅ‘ email</td></tr>
                <tr><td>email_from_name</td><td>text</td><td>PipeLiT</td><td>KÃ¼ldÅ‘ nÃ©v</td></tr>
            </tbody>
        </table>

        <h4>logs</h4>
        <p>Audit naplÃ³ - minden entitÃ¡s mÅ±velet naplÃ³zÃ¡sa.</p>
        <table>
            <thead><tr><th>MezÅ‘</th><th>TÃ­pus</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>id</td><td>uuid (PK)</td><td>ElsÅ‘dleges kulcs</td></tr>
                <tr><td>entity_type</td><td>text NOT NULL</td><td>EntitÃ¡s tÃ­pusa</td></tr>
                <tr><td>entity_id</td><td>uuid</td><td>EntitÃ¡s azonosÃ­tÃ³</td></tr>
                <tr><td>action</td><td>text NOT NULL</td><td>create, update, delete, stb.</td></tr>
                <tr><td>user_id</td><td>uuid (FK)</td><td>â†’ profiles (ki vÃ©gezte)</td></tr>
                <tr><td>company_id</td><td>uuid (FK)</td><td>â†’ companies</td></tr>
                <tr><td>previous_values</td><td>jsonb</td><td>ElÅ‘zÅ‘ Ã©rtÃ©kek</td></tr>
                <tr><td>new_values</td><td>jsonb</td><td>Ãšj Ã©rtÃ©kek</td></tr>
                <tr><td>created_at</td><td>timestamptz</td><td>IdÅ‘bÃ©lyeg</td></tr>
            </tbody>
        </table>
    </div>

    <!-- ==================== 6. FUNKCIONÃLIS MODULOK ==================== -->
    <div class="section" id="modules">
        <h2>6. FUNKCIONÃLIS MODULOK</h2>

        <h3>6.1. Partner Modul</h3>
        <p><strong>CÃ©l:</strong> Ãœgyfelek, szÃ¡llÃ­tÃ³k, partnerek nyilvÃ¡ntartÃ¡sa.</p>
        <p><strong>Ã‰rintett role-ok:</strong> Minden bejelentkezett felhasznÃ¡lÃ³ (company scope szerint)</p>
        
        <h4>KÃ©pernyÅ‘k</h4>
        <ul>
            <li><strong>/partners</strong> - Partner lista (szÅ±rÃ©s, rendezÃ©s, export)</li>
            <li><strong>/partners/:id</strong> - Partner rÃ©szletek (tabok: Projektek, Feladatok, EsemÃ©nyek, Dokumentumok, Ã‰rtÃ©kesÃ­tÃ©sek)</li>
        </ul>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>CRUD mÅ±veletek</li>
            <li>HÃ¡romszintÅ± cÃ­mrendszer (szÃ©khely kÃ¶telezÅ‘, telephely/levelezÃ©si opcionÃ¡lis)</li>
            <li>CÃ­m mÃ¡solÃ¡s checkboxokkal ("Megegyezik a szÃ©khellyel")</li>
            <li>Magyar adÃ³szÃ¡m validÃ¡ciÃ³ (<strong>KÃ–TELEZÅ</strong>)</li>
            <li>KapcsolattartÃ³k kezelÃ©se (elsÅ‘dleges jelÃ¶lÃ©s)</li>
            <li>FelhasznÃ¡lÃ³i hozzÃ¡fÃ©rÃ©s korlÃ¡tozÃ¡s (restrict_access flag)</li>
            <li>Export (PDF, Excel, CSV) lÃ¡thatÃ³ oszlopokkal</li>
            <li>Oszlop lÃ¡thatÃ³sÃ¡g Ã©s sorrend testreszabÃ¡s</li>
        </ul>
        
        <div class="removed-box">
            <strong>ELTÃVOLÃTOTT:</strong> Anya-leÃ¡nyvÃ¡llalat kapcsolat funkciÃ³ (user dÃ¶ntÃ©s alapjÃ¡n).
        </div>

        <h3>6.2. Projekt Modul</h3>
        <p><strong>CÃ©l:</strong> Projektek tervezÃ©se, nyomon kÃ¶vetÃ©se.</p>
        
        <h4>KÃ©pernyÅ‘k</h4>
        <ul>
            <li><strong>/projects</strong> - Projekt lista</li>
            <li><strong>/projects/:id</strong> - Projekt rÃ©szletek (feladatok, esemÃ©nyek, dokumentumok)</li>
            <li><strong>/kanban</strong> - Kanban nÃ©zet (drag-drop stÃ¡tuszvÃ¡ltÃ¡s)</li>
            <li><strong>/gantt</strong> - Gantt diagram (idÅ‘sor nÃ©zet)</li>
        </ul>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>CRUD mÅ±veletek</li>
            <li>Projekt stÃ¡tuszok (master_data-bÃ³l)</li>
            <li>Projekt felelÅ‘sÃ¶k (owner + 2 responsible)</li>
            <li>Projekt szÃ­nek naptÃ¡rban (task_color, event_color)</li>
            <li>KapcsolÃ³dÃ³ feladatok, esemÃ©nyek, dokumentumok</li>
            <li>JÃ³vÃ¡hagyÃ¡si workflow integrÃ¡ciÃ³</li>
            <li>Export Ã©s kedvencek</li>
        </ul>

        <h3>6.3. Sales Modul</h3>
        <p><strong>CÃ©l:</strong> Ã‰rtÃ©kesÃ­tÃ©si pipeline kezelÃ©se.</p>
        
        <h4>KÃ©pernyÅ‘k</h4>
        <ul>
            <li><strong>/sales</strong> - Ã‰rtÃ©kesÃ­tÃ©s lista</li>
            <li><strong>/sales/:id</strong> - Ã‰rtÃ©kesÃ­tÃ©s rÃ©szletek</li>
        </ul>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>CRUD mÅ±veletek</li>
            <li>VÃ¡rhatÃ³ Ã©rtÃ©k Ã©s valÃ³szÃ­nÅ±sÃ©g</li>
            <li>LezÃ¡rÃ¡si dÃ¡tum elÅ‘rejelzÃ©s</li>
            <li>ÃœzletÃ¡gi besorolÃ¡s</li>
            <li>KapcsolÃ³dÃ³ feladatok, dokumentumok</li>
        </ul>

        <h3>6.4. SzerzÅ‘dÃ©s Modul</h3>
        <p><strong>CÃ©l:</strong> SzerzÅ‘dÃ©sek kezelÃ©se, verziÃ³kÃ¶vetÃ©se, lejÃ¡rat figyelÃ©se.</p>
        
        <h4>KÃ©pernyÅ‘k</h4>
        <ul>
            <li><strong>/contracts</strong> - SzerzÅ‘dÃ©s lista (DokumentumtÃ¡r almenÃ¼ben)</li>
            <li><strong>/contracts/:id</strong> - SzerzÅ‘dÃ©s rÃ©szletek (fÃ¡jlok, verziÃ³k)</li>
        </ul>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>CRUD mÅ±veletek</li>
            <li>Teljes verziÃ³kÃ¶vetÃ©s (contract_versions)</li>
            <li>VerziÃ³ visszaÃ¡llÃ­tÃ¡s (admin only)</li>
            <li>LejÃ¡rat, felmondÃ¡si idÅ‘, megÃºjÃ­tÃ¡s figyelmeztetÃ©sek</li>
            <li>FizetÃ©si informÃ¡ciÃ³k (gyakorisÃ¡g, Ã¶sszeg, deviza)</li>
            <li>Automatikus megÃºjÃ­tÃ¡s beÃ¡llÃ­tÃ¡s</li>
            <li>FelhasznÃ¡lÃ³i hozzÃ¡fÃ©rÃ©s korlÃ¡tozÃ¡s</li>
            <li>Multi-file tÃ¡mogatÃ¡s verziÃ³kÃ¶vetÃ©ssel</li>
            <li>PDF Ã©s kÃ©p elÅ‘nÃ©zet</li>
            <li>Bulk ZIP letÃ¶ltÃ©s</li>
            <li>SzÅ±rÃ©s (fÃ¡jltÃ­pus, dÃ¡tum, szÃ¶veg)</li>
            <li>Drag-drop feltÃ¶ltÃ©s</li>
            <li>Soft delete (admin) / Hard delete (SA + jelszÃ³)</li>
            <li>JÃ³vÃ¡hagyÃ¡si workflow integrÃ¡ciÃ³</li>
        </ul>

        <h3>6.5. Dokumentum Modul</h3>
        <p><strong>CÃ©l:</strong> Dokumentumok tÃ¡rolÃ¡sa, verziÃ³kÃ¶vetÃ©se, megosztÃ¡sa.</p>
        
        <h4>KÃ©pernyÅ‘k</h4>
        <ul>
            <li><strong>/documents</strong> - Dokumentum lista (DokumentumtÃ¡r almenÃ¼ben)</li>
            <li><strong>/documents/:id</strong> - Dokumentum rÃ©szletek</li>
            <li><strong>/templates</strong> - Dokumentum sablonok</li>
        </ul>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>Multi-file tÃ¡mogatÃ¡s (document_files)</li>
            <li>VerziÃ³kÃ¶vetÃ©s Ã©s visszaÃ¡llÃ­tÃ¡s (admin only)</li>
            <li>Visibility: COMPANY_ONLY, PROJECT_ONLY, SALES_ONLY, PUBLIC</li>
            <li>PDF Ã©s kÃ©p elÅ‘nÃ©zet (blob URL-lel)</li>
            <li>Bulk ZIP letÃ¶ltÃ©s ({dokumentum_cÃ­m}_{YYYYMMDD_HHMMSS}.zip)</li>
            <li>SzÅ±rÃ©s (fÃ¡jltÃ­pus, dÃ¡tum tartomÃ¡ny, szabad szÃ¶veg)</li>
            <li>Drag-drop feltÃ¶ltÃ©s</li>
            <li>Soft delete (admin) / Hard delete (SA + jelszÃ³)</li>
            <li>JÃ³vÃ¡hagyÃ¡si workflow integrÃ¡ciÃ³</li>
            <li>FÃ¡jltÃ­pus-specifikus ikonok</li>
        </ul>
        
        <div class="removed-box">
            <strong>ELTÃVOLÃTOTT:</strong> Word/Excel/PowerPoint elÅ‘nÃ©zet (nem megbÃ­zhatÃ³ bÃ¶ngÃ©szÅ‘ben - user dÃ¶ntÃ©s).
        </div>

        <h4>PDF ElÅ‘nÃ©zet FunkciÃ³k</h4>
        <ul>
            <li>Folyamatos gÃ¶rgetÃ©s (nincs lapozÃ¡s gomb)</li>
            <li>Zoom (50-200%, reset gomb)</li>
            <li>Scroll-alapÃº oldalszÃ¡m kijelzÃ©s + oldal ugrÃ¡s Enter-rel</li>
            <li>KeresÃ©s kiemelÃ©sekkel (Acrobat stÃ­lusÃº - vilÃ¡goskÃ©k talÃ¡latok, sÃ¶tÃ©tkÃ©k aktuÃ¡lis)</li>
            <li>Thumbnail sidebar + kÃ¶nyvjelzÅ‘k</li>
            <li>ForgatÃ¡s (90Â° lÃ©ptÃ©k), teljes kÃ©pernyÅ‘, nyomtatÃ¡s</li>
            <li>SzÃ¶veg kijelÃ¶lÃ©s Ã©s mÃ¡solÃ¡s</li>
        </ul>

        <h3>6.6. Feladat Ã©s EsemÃ©ny Modul</h3>
        <p><strong>CÃ©l:</strong> TeendÅ‘k Ã©s esemÃ©nyek kezelÃ©se, naptÃ¡r integrÃ¡ciÃ³.</p>
        
        <h4>KÃ©pernyÅ‘k</h4>
        <ul>
            <li><strong>/my-items</strong> - SajÃ¡t feladatok Ã©s esemÃ©nyek</li>
            <li><strong>/calendar</strong> - NaptÃ¡r nÃ©zet</li>
        </ul>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>Feladatok Ã©s esemÃ©nyek <strong>kÃ¼lÃ¶n tÃ¡blÃ¡kban</strong></li>
            <li>IsmÃ©tlÅ‘dÃ©s tÃ¡mogatÃ¡s (none, daily, weekly, monthly, yearly)</li>
            <li>VirtuÃ¡lis elÅ‘fordulÃ¡sok generÃ¡lÃ¡sa (recurrenceUtils)</li>
            <li>EgÃ©sz napos jelÃ¶lÃ©s explicit toggle-lel</li>
            <li>Partner, projekt, sales kapcsolat (opcionÃ¡lis)</li>
            <li>FelelÅ‘s Ã©s lÃ©trehozÃ³ megkÃ¼lÃ¶nbÃ¶ztetÃ©s</li>
            <li><strong>HatÃ¡ridÅ‘/befejezÃ©si idÅ‘ KÃ–TELEZÅ</strong></li>
            <li>LÃ¡thatÃ³sÃ¡g: felelÅ‘s VAGY lÃ©trehozÃ³ lÃ¡tja</li>
            <li>EsemÃ©nyek rÃ©sztvevÅ‘kkel (belsÅ‘ user + kÃ¼lsÅ‘ email)</li>
        </ul>
        
        <h4>TÃ¶rlÃ©si JogosultsÃ¡g</h4>
        <ul>
            <li><strong>SzemÃ©lyes (projekt/sales nÃ©lkÃ¼li):</strong> lÃ©trehozÃ³ tÃ¶rÃ¶lheti</li>
            <li><strong>Projekthez/sales-hez kÃ¶tÃ¶tt:</strong> super admin, company admin (can_delete), projekt owner, projekt felelÅ‘sÃ¶k tÃ¶rÃ¶lhetik</li>
        </ul>

        <h3>6.7. NaptÃ¡r Modul</h3>
        <p><strong>CÃ©l:</strong> Feladatok Ã©s esemÃ©nyek vizuÃ¡lis megjelenÃ­tÃ©se idÅ‘soron.</p>
        
        <h4>KÃ©pernyÅ‘:</h4> <strong>/calendar</strong>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>HÃ¡rom nÃ©zet: nap, hÃ©t, hÃ³nap</li>
            <li><strong>24 Ã³rÃ¡s idÅ‘formÃ¡tum</strong> (alkalmazÃ¡s-szerte kÃ¶telezÅ‘)</li>
            <li>Drag-drop Ã¡tÃ¼temezÃ©s (@dnd-kit)</li>
            <li>HÃ³nap nÃ©zetnÃ©l drag megÅ‘rzi az eredeti idÅ‘pontot</li>
            <li>TaskViewSheet: kattintÃ¡sra read-only rÃ©szletek (slide-out panel)</li>
            <li>Projekt szÃ­nek Ã©s szemÃ©lyes szÃ­nek</li>
            <li>EgÃ©sz napos elemek kÃ¼lÃ¶n "all-day" sorban</li>
            <li>Sticky fejlÃ©c, oldalon belÃ¼li gÃ¶rgetÃ©s</li>
            <li>Konzisztens grid template az oszlopok igazÃ­tÃ¡sÃ¡hoz</li>
        </ul>

        <h3>6.8. IdÅ‘kÃ¶vetÃ©s Modul</h3>
        <p><strong>CÃ©l:</strong> Projektekre/feladatokra fordÃ­tott idÅ‘ mÃ©rÃ©se.</p>
        
        <h4>KÃ©pernyÅ‘:</h4> <strong>/time-tracking</strong>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>Timer indÃ­tÃ¡s/leÃ¡llÃ­tÃ¡s feladathoz</li>
            <li>ManuÃ¡lis idÅ‘bejegyzÃ©s (start, end, leÃ­rÃ¡s)</li>
            <li>Egy aktÃ­v timer / felhasznÃ¡lÃ³ korlÃ¡tozÃ¡s</li>
            <li>Ã–sszesÃ­tÃ©s projekt Ã©s idÅ‘szak szerint</li>
            <li>TimeTrackingWidget feladat rÃ©szletnÃ©l</li>
            <li>Export funkciÃ³</li>
        </ul>

        <h3>6.9. JÃ³vÃ¡hagyÃ¡si Workflow</h3>
        <p><strong>CÃ©l:</strong> SzerzÅ‘dÃ©sek, dokumentumok, projektek jÃ³vÃ¡hagyÃ¡sa.</p>
        
        <h4>FunkciÃ³k</h4>
        <ul>
            <li>JÃ³vÃ¡hagyÃ¡s kÃ©rÃ©s: szerzÅ‘dÃ©s, dokumentum, projekt</li>
            <li>StÃ¡tuszok: pending, approved, rejected</li>
            <li>ElutasÃ­tÃ¡s indoklÃ¡s kÃ¶telezÅ‘</li>
            <li>ElÅ‘zmÃ©nyek megtekintÃ©se (ApprovalHistoryDialog)</li>
            <li>Dashboard widget: PendingApprovalsWidget (admin)</li>
        </ul>

        <h3>6.10. AutomatizÃ¡ciÃ³ Modul</h3>
        <p><strong>CÃ©l:</strong> Trigger-alapÃº automatikus mÅ±veletek.</p>
        
        <h4>KÃ©pernyÅ‘:</h4> <strong>/automation</strong>
        
        <h4>Trigger tÃ­pusok</h4>
        <ul>
            <li>task_status_change (from/to status)</li>
            <li>task_created</li>
            <li>deadline_approaching (days_before)</li>
            <li>project_status_change</li>
            <li>sales_status_change</li>
            <li>contract_expiring</li>
        </ul>
        
        <h4>AkciÃ³ tÃ­pusok</h4>
        <ul>
            <li>send_notification (title, message)</li>
            <li>change_status (new_status)</li>
            <li>assign_user (user_id)</li>
            <li>create_task (task_title, deadline_days)</li>
            <li>send_email</li>
        </ul>
        
        <h4>Komponensek</h4>
        <ul>
            <li>RuleConditionBuilder: dinamikus UI trigger/action config-hoz</li>
            <li>AutomationLogsList: vÃ©grehajtÃ¡si naplÃ³</li>
            <li>execute-automation edge function</li>
        </ul>

        <h3>6.11. Dashboard</h3>
        <p><strong>CÃ©l:</strong> Ã–sszefoglalÃ³ nÃ©zet testreszabhatÃ³ widgetekkel.</p>
        
        <h4>KÃ©pernyÅ‘:</h4> <strong>/ (fÅ‘oldal)</strong>
        
        <h4>Widgetek</h4>
        <ul>
            <li>LicenseStatusWidget - licenc Ã¡llapot</li>
            <li>PendingApprovalsWidget - fÃ¼ggÅ‘ jÃ³vÃ¡hagyÃ¡sok (admin)</li>
            <li>TasksWidget - lejÃ¡rÃ³/kÃ©sÅ‘ feladatok</li>
            <li>WeeklyCalendarWidget - heti naptÃ¡r</li>
            <li>ProjectsChart - projekt stÃ¡tuszok (bar chart)</li>
            <li>SalesChart - sales pipeline (pie chart)</li>
            <li>RecentActivityWidget - legutÃ³bbi tevÃ©kenysÃ©gek</li>
        </ul>
        
        <h4>TestreszabÃ¡s</h4>
        <ul>
            <li>Widget visibility toggle</li>
            <li>Drag-drop pozÃ­ciÃ³ rendezÃ©s</li>
            <li>SzÃ©lessÃ©g beÃ¡llÃ­tÃ¡s (half/full)</li>
            <li>FelhasznÃ¡lÃ³nkÃ©nti mentÃ©s (dashboard_widgets)</li>
            <li>DashboardCustomizer popover</li>
        </ul>

        <h3>6.12. TovÃ¡bbi Modulok</h3>
        
        <h4>Ã‰rtesÃ­tÃ©sek</h4>
        <ul>
            <li>Real-time Supabase Realtime subscriptions</li>
            <li>NotificationCenter (TopBar harang ikon)</li>
            <li>Olvasottnak jelÃ¶lÃ©s, navigÃ¡lÃ¡s entitÃ¡shoz</li>
        </ul>
        
        <h4>GlobÃ¡lis KeresÃ©s</h4>
        <ul>
            <li>GlobalSearch komponens TopBar-ban</li>
            <li>Projektek, sales, partnerek, dokumentumok keresÃ©se</li>
            <li>NavigÃ¡lÃ¡s talÃ¡latra</li>
        </ul>
        
        <h4>Export Ã©s Riportok</h4>
        <ul>
            <li>ExportMenu: PDF, Excel, CSV formÃ¡tumok</li>
            <li>LÃ¡thatÃ³ oszlopok exportÃ¡lÃ¡sa</li>
            <li>Reports oldal Ã¶sszesÃ­tÃ©sekkel</li>
        </ul>
        
        <h4>Import</h4>
        <ul>
            <li>CSV/Excel import: partnerek, projektek, sales</li>
            <li>ImportDialog: mezÅ‘ mapping, validÃ¡ciÃ³</li>
        </ul>
        
        <h4>Kedvencek Ã©s CÃ­mkÃ©k</h4>
        <ul>
            <li>FavoriteButton minden listÃ¡zÃ³ oldalon</li>
            <li>TagSelector entitÃ¡sokhoz</li>
            <li>CÃ­mke tÃ¶rlÃ©s csak ha nincs hozzÃ¡rendelve</li>
        </ul>
        
        <h4>Bulk MÅ±veletek</h4>
        <ul>
            <li>Checkbox-os kijelÃ¶lÃ©s</li>
            <li>BulkActionsToolbar: tÃ¶meges tÃ¶rlÃ©s, stÃ¡tuszvÃ¡ltÃ¡s</li>
        </ul>
        
        <h4>MegjegyzÃ©sek</h4>
        <ul>
            <li>CommentsSection komponens</li>
            <li>EntitÃ¡sokhoz fÅ±zhetÅ‘ megjegyzÃ©sek</li>
            <li>SzerkesztÃ©s/tÃ¶rlÃ©s csak szerzÅ‘ Ã¡ltal</li>
        </ul>
    </div>

    <!-- ==================== 7. FOLYAMATOK ==================== -->
    <div class="section" id="flows">
        <h2>7. FOLYAMATOK / FLOW-K</h2>

        <h3>7.1. Login + 2FA Flow</h3>
        <ol>
            <li>User megadja email + jelszÃ³</li>
            <li><code>supabase.auth.signInWithPassword()</code></li>
            <li>Sikeres auth â†’ <code>signOut({ scope: 'others' })</code> (single session)</li>
            <li>EllenÅ‘rzÃ©s: <code>is_account_locked_by_email()</code></li>
            <li>Ha locked â†’ hibaÃ¼zenet, login blokkolva</li>
            <li><code>record_login_attempt()</code> rÃ¶gzÃ­tÃ©s</li>
            <li>EllenÅ‘rzÃ©s: <code>user_has_2fa_enabled()</code></li>
            <li>Ha 2FA enabled â†’ TwoFactorDialog megjelenik</li>
            <li>User beÃ­rja TOTP vagy recovery kÃ³dot</li>
            <li><code>verify-2fa-token</code> edge function validÃ¡l</li>
            <li>Sikeres â†’ <code>session_2fa_verifications</code> lÃ©trehozÃ¡s</li>
            <li>EllenÅ‘rzÃ©s: <code>is_password_expired()</code></li>
            <li>Ha lejÃ¡rt â†’ redirect /change-password</li>
            <li>Sikeres login â†’ Dashboard</li>
        </ol>

        <h3>7.2. Account Lock / Unlock Flow</h3>
        
        <h4>Automatikus zÃ¡rolÃ¡s</h4>
        <ol>
            <li>Sikertelen login â†’ <code>record_login_attempt()</code></li>
            <li><code>count_recent_failed_attempts()</code> ellenÅ‘rzÃ©s</li>
            <li>Ha >= threshold (default 5) â†’ <code>lock_account_for_email()</code></li>
            <li><code>notify-account-lock</code> edge function â†’ admin Ã©rtesÃ­tÃ©s</li>
            <li>locked_until beÃ¡llÃ­tÃ¡s (default 1 perc)</li>
        </ol>
        
        <h4>Automatikus feloldÃ¡s</h4>
        <ol>
            <li>locked_until idÅ‘ letelt</li>
            <li><code>cleanup_expired_locks()</code> tÃ¶rli a rekordot</li>
            <li>KÃ¶vetkezÅ‘ login kÃ­sÃ©rlet sikeres lehet</li>
        </ol>
        
        <h4>ManuÃ¡lis feloldÃ¡s</h4>
        <ol>
            <li>Super Admin â†’ Account Management â†’ Locked Accounts tab</li>
            <li>"FeloldÃ¡s" gomb â†’ <code>unlock_account_by_user_id()</code></li>
            <li>locked_accounts rekord tÃ¶rlÃ©se + failed attempts tÃ¶rlÃ©se</li>
        </ol>

        <h3>7.3. User LÃ©trehozÃ¡s + RegisztrÃ¡ciÃ³ Flow</h3>
        
        <h4>Super Admin Ã¡ltal lÃ©trehozÃ¡s</h4>
        <ol>
            <li>SA megnyitja Settings â†’ FiÃ³kok KezelÃ©se</li>
            <li>"Ãšj felhasznÃ¡lÃ³" â†’ UserCreateForm</li>
            <li>KitÃ¶lti: email, teljes nÃ©v, vezetÃ©knÃ©v, keresztnÃ©v, role</li>
            <li><strong>KÃ©t gomb:</strong>
                <ul>
                    <li>"MentÃ©s" - csak lÃ©trehozza, nem kÃ¼ld meghÃ­vÃ³t</li>
                    <li>"MentÃ©s Ã©s kÃ³d kÃ¼ldÃ©se" - lÃ©trehozza + meghÃ­vÃ³t kÃ¼ld</li>
                </ul>
            </li>
            <li><code>admin-create-user</code> edge function â†’ auth.users + profiles</li>
        </ol>
        
        <h4>RegisztrÃ¡ciÃ³s kÃ³d kÃ¼ldÃ©se</h4>
        <ol>
            <li>SA kivÃ¡lasztja a usert â†’ "RegisztrÃ¡ciÃ³s kÃ³d kÃ¼ldÃ©se"</li>
            <li><code>prepare_user_invitation()</code> â†’ Ãºj 8 karakteres kÃ³d generÃ¡lÃ¡s</li>
            <li><code>send-registration-invite</code> edge function â†’ email kÃ¼ldÃ©s</li>
            <li>24 Ã³rÃ¡s lejÃ¡rat beÃ¡llÃ­tÃ¡s</li>
            <li><strong>ÃšjrakÃ¼ldÃ©skor mindig ÃšJ kÃ³d generÃ¡lÃ³dik</strong></li>
        </ol>
        
        <h4>RegisztrÃ¡ciÃ³ befejezÃ©se</h4>
        <ol>
            <li>User megkapja az emailt a linkkel</li>
            <li>/register?email=...&code=... oldal</li>
            <li>Email Ã©s nÃ©v mezÅ‘k <strong>read-only</strong> (pre-filled)</li>
            <li>User megadja: jelszÃ³ (2x), regisztrÃ¡ciÃ³s kÃ³d</li>
            <li><code>complete-registration</code> edge function validÃ¡l</li>
            <li>JelszÃ³ komplexitÃ¡s ellenÅ‘rzÃ©s</li>
            <li>Sikeres â†’ registered_at beÃ¡llÃ­tÃ¡s, is_active = true</li>
        </ol>
        
        <h4>RegisztrÃ¡ciÃ³s stÃ¡tusz jelzÅ‘k (UserList)</h4>
        <ul>
            <li>ğŸ• Ã“ra ikon - meghÃ­vÃ³ mÃ©g nem kÃ¼ldve</li>
            <li>âœ‰ï¸ BorÃ­tÃ©k ikon - meghÃ­vÃ³ elkÃ¼ldve, regisztrÃ¡ciÃ³ folyamatban</li>
            <li>âœ“ Pipa ikon - regisztrÃ¡lt felhasznÃ¡lÃ³</li>
        </ul>

        <h3>7.4. Licenc AktivÃ¡lÃ¡s Flow</h3>
        <ol>
            <li>SA generÃ¡l licenc kulcsot (/license-generator)</li>
            <li>Licenc kulcs tartalmazza: company info + features + validity + nonce</li>
            <li>Company admin megkapja a kulcsot</li>
            <li>Settings â†’ Company â†’ "Licenc aktivÃ¡lÃ¡sa"</li>
            <li><code>activate-license</code> edge function validÃ¡l Ã©s aktivÃ¡l</li>
            <li>company_licenses rekord lÃ©trehozÃ¡s/frissÃ­tÃ©s</li>
        </ol>

        <h3>7.5. Dokumentum FeltÃ¶ltÃ©s + VerziÃ³kezelÃ©s Flow</h3>
        <ol>
            <li>User megnyitja DocumentDetail vagy ContractDetail</li>
            <li>Drag-drop vagy "FeltÃ¶ltÃ©s" gomb</li>
            <li>FÃ¡jl feltÃ¶ltÃ©s â†’ Supabase Storage (documents bucket)</li>
            <li>document_files rekord lÃ©trehozÃ¡s (version = 1, is_current = true)</li>
            <li>Ãšj verziÃ³ feltÃ¶ltÃ©sekor:
                <ul>
                    <li>RÃ©gi verziÃ³ is_current = false</li>
                    <li>Ãšj rekord version = n+1, is_current = true</li>
                    <li>original_file_id â†’ elsÅ‘ verziÃ³</li>
                </ul>
            </li>
            <li>VerziÃ³ visszaÃ¡llÃ­tÃ¡s (admin only):
                <ul>
                    <li>RÃ©gi verziÃ³ mÃ¡solÃ¡sa Ãºj verziÃ³kÃ©nt</li>
                    <li>is_current flag-ek frissÃ­tÃ©se</li>
                </ul>
            </li>
        </ol>

        <h3>7.6. AutomatizÃ¡ciÃ³ VÃ©grehajtÃ¡s Flow</h3>
        <ol>
            <li>Trigger event tÃ¶rtÃ©nik (pl. task stÃ¡tuszvÃ¡ltÃ¡s)</li>
            <li><code>useAutomationExecution</code> hook meghÃ­vja <code>execute-automation</code></li>
            <li>Edge function lekÃ©rdezi az aktÃ­v szabÃ¡lyokat</li>
            <li>Trigger config illeszkedÃ©s ellenÅ‘rzÃ©s</li>
            <li>Ha illeszkedik â†’ action vÃ©grehajtÃ¡s</li>
            <li>automation_logs rekord lÃ©trehozÃ¡s (success/error)</li>
        </ol>
    </div>

    <!-- ==================== 8. EDGE FUNCTIONS ==================== -->
    <div class="section" id="edge-functions">
        <h2>8. EDGE FUNCTIONS</h2>

        <h3>8.1. Auth Ã©s User Management</h3>
        <table>
            <thead><tr><th>FunkciÃ³</th><th>LeÃ­rÃ¡s</th><th>Input</th><th>JogosultsÃ¡g</th></tr></thead>
            <tbody>
                <tr>
                    <td><code>admin-create-user</code></td>
                    <td>Ãšj felhasznÃ¡lÃ³ lÃ©trehozÃ¡sa (auth + profile)</td>
                    <td>email, full_name, given_name, family_name, role, company_id, company_role</td>
                    <td>Super Admin</td>
                </tr>
                <tr>
                    <td><code>admin-update-user</code></td>
                    <td>FelhasznÃ¡lÃ³ adatok mÃ³dosÃ­tÃ¡sa</td>
                    <td>userId, role, is_active, can_delete, can_view_logs</td>
                    <td>Super Admin</td>
                </tr>
                <tr>
                    <td><code>admin-delete-user</code></td>
                    <td>FelhasznÃ¡lÃ³ tÃ¶rlÃ©se (soft + auth)</td>
                    <td>userId</td>
                    <td>Super Admin</td>
                </tr>
                <tr>
                    <td><code>admin-update-password</code></td>
                    <td>FelhasznÃ¡lÃ³ jelszÃ³ mÃ³dosÃ­tÃ¡sa</td>
                    <td>userId, newPassword</td>
                    <td>Super Admin</td>
                </tr>
                <tr>
                    <td><code>complete-registration</code></td>
                    <td>RegisztrÃ¡ciÃ³ befejezÃ©se kÃ³ddal</td>
                    <td>email, userCode, fullName, familyName, givenName, password</td>
                    <td>Publikus (kÃ³d validÃ¡ciÃ³)</td>
                </tr>
                <tr>
                    <td><code>send-registration-invite</code></td>
                    <td>RegisztrÃ¡ciÃ³s meghÃ­vÃ³ kÃ¼ldÃ©se</td>
                    <td>userId</td>
                    <td>Super Admin</td>
                </tr>
            </tbody>
        </table>

        <h3>8.2. Session Ã©s Security</h3>
        <table>
            <thead><tr><th>FunkciÃ³</th><th>LeÃ­rÃ¡s</th><th>Input</th><th>JogosultsÃ¡g</th></tr></thead>
            <tbody>
                <tr>
                    <td><code>verify-2fa-token</code></td>
                    <td>TOTP/recovery kÃ³d validÃ¡lÃ¡s</td>
                    <td>email, token, isRecoveryCode</td>
                    <td>Authenticated</td>
                </tr>
                <tr>
                    <td><code>generate-recovery-codes</code></td>
                    <td>Recovery kÃ³dok generÃ¡lÃ¡sa</td>
                    <td>-</td>
                    <td>Authenticated</td>
                </tr>
                <tr>
                    <td><code>get-active-sessions</code></td>
                    <td>AktÃ­v sessionÃ¶k lekÃ©rdezÃ©se</td>
                    <td>-</td>
                    <td>Super Admin</td>
                </tr>
                <tr>
                    <td><code>terminate-user-session</code></td>
                    <td>Session megszakÃ­tÃ¡sa + broadcast</td>
                    <td>userId</td>
                    <td>Super Admin</td>
                </tr>
                <tr>
                    <td><code>notify-account-lock</code></td>
                    <td>FiÃ³k zÃ¡rolÃ¡s Ã©rtesÃ­tÃ©s kÃ¼ldÃ©se</td>
                    <td>userEmail, reason</td>
                    <td>System (SECURITY DEFINER)</td>
                </tr>
            </tbody>
        </table>

        <h3>8.3. License Management</h3>
        <table>
            <thead><tr><th>FunkciÃ³</th><th>LeÃ­rÃ¡s</th><th>Input</th><th>JogosultsÃ¡g</th></tr></thead>
            <tbody>
                <tr>
                    <td><code>activate-license</code></td>
                    <td>Licenc kulcs aktivÃ¡lÃ¡sa</td>
                    <td>licenseKey, companyId</td>
                    <td>Company Admin</td>
                </tr>
                <tr>
                    <td><code>validate-license</code></td>
                    <td>Licenc Ã©rvÃ©nyessÃ©g ellenÅ‘rzÃ©s</td>
                    <td>companyId</td>
                    <td>Authenticated</td>
                </tr>
            </tbody>
        </table>

        <h3>8.4. Notifications Ã©s Email</h3>
        <table>
            <thead><tr><th>FunkciÃ³</th><th>LeÃ­rÃ¡s</th><th>Input</th><th>JogosultsÃ¡g</th></tr></thead>
            <tbody>
                <tr>
                    <td><code>send-email</code></td>
                    <td>Email kÃ¼ldÃ©s Resend API-val</td>
                    <td>to[], subject, html, from</td>
                    <td>System</td>
                </tr>
                <tr>
                    <td><code>send-event-invitation</code></td>
                    <td>EsemÃ©ny meghÃ­vÃ³ kÃ¼ldÃ©se</td>
                    <td>eventId, participantIds</td>
                    <td>Authenticated</td>
                </tr>
                <tr>
                    <td><code>check-deadlines</code></td>
                    <td>HatÃ¡ridÅ‘ ellenÅ‘rzÃ©s Ã©s Ã©rtesÃ­tÃ©s</td>
                    <td>-</td>
                    <td>System (cron)</td>
                </tr>
            </tbody>
        </table>

        <h3>8.5. Automation</h3>
        <table>
            <thead><tr><th>FunkciÃ³</th><th>LeÃ­rÃ¡s</th><th>Input</th><th>JogosultsÃ¡g</th></tr></thead>
            <tbody>
                <tr>
                    <td><code>execute-automation</code></td>
                    <td>AutomatizÃ¡ciÃ³s szabÃ¡lyok vÃ©grehajtÃ¡sa</td>
                    <td>triggerType, entityType, entityId, triggerData</td>
                    <td>Authenticated</td>
                </tr>
            </tbody>
        </table>

        <h3>8.6. Utility</h3>
        <table>
            <thead><tr><th>FunkciÃ³</th><th>LeÃ­rÃ¡s</th><th>Input</th><th>JogosultsÃ¡g</th></tr></thead>
            <tbody>
                <tr>
                    <td><code>check-api-key-status</code></td>
                    <td>Resend API kulcs ellenÅ‘rzÃ©s</td>
                    <td>-</td>
                    <td>Super Admin</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ==================== 9. FRONTEND ==================== -->
    <div class="section" id="frontend">
        <h2>9. FRONTEND STRUKTÃšRA</h2>

        <h3>9.1. Oldalak (29 db)</h3>
        <table>
            <thead><tr><th>Route</th><th>Komponens</th><th>LeÃ­rÃ¡s</th></tr></thead>
            <tbody>
                <tr><td>/</td><td>Dashboard</td><td>TestreszabhatÃ³ dashboard</td></tr>
                <tr><td>/auth</td><td>Auth</td><td>Login + 2FA</td></tr>
                <tr><td>/register</td><td>Register</td><td>RegisztrÃ¡ciÃ³ kÃ³ddal</td></tr>
                <tr><td>/change-password</td><td>ChangePassword</td><td>KÃ¶telezÅ‘ jelszÃ³vÃ¡ltoztatÃ¡s</td></tr>
                <tr><td>/partners</td><td>Partners</td><td>Partner lista</td></tr>
                <tr><td>/partners/:id</td><td>PartnerDetail</td><td>Partner rÃ©szletek</td></tr>
                <tr><td>/projects</td><td>Projects</td><td>Projekt lista</td></tr>
                <tr><td>/projects/:id</td><td>ProjectDetail</td><td>Projekt rÃ©szletek</td></tr>
                <tr><td>/sales</td><td>Sales</td><td>Ã‰rtÃ©kesÃ­tÃ©s lista</td></tr>
                <tr><td>/sales/:id</td><td>SalesDetail</td><td>Ã‰rtÃ©kesÃ­tÃ©s rÃ©szletek</td></tr>
                <tr><td>/contracts</td><td>Contracts</td><td>SzerzÅ‘dÃ©s lista</td></tr>
                <tr><td>/contracts/:id</td><td>ContractDetail</td><td>SzerzÅ‘dÃ©s rÃ©szletek</td></tr>
                <tr><td>/documents</td><td>Documents</td><td>Dokumentum lista</td></tr>
                <tr><td>/documents/:id</td><td>DocumentDetail</td><td>Dokumentum rÃ©szletek</td></tr>
                <tr><td>/templates</td><td>DocumentTemplates</td><td>Sablonok</td></tr>
                <tr><td>/calendar</td><td>CalendarPage</td><td>NaptÃ¡r nÃ©zet</td></tr>
                <tr><td>/my-items</td><td>MyItems</td><td>SajÃ¡t feladatok/esemÃ©nyek</td></tr>
                <tr><td>/kanban</td><td>Kanban</td><td>Kanban nÃ©zet</td></tr>
                <tr><td>/gantt</td><td>Gantt</td><td>Gantt diagram</td></tr>
                <tr><td>/time-tracking</td><td>TimeTracking</td><td>IdÅ‘kÃ¶vetÃ©s</td></tr>
                <tr><td>/automation</td><td>Automation</td><td>AutomatizÃ¡ciÃ³</td></tr>
                <tr><td>/reports</td><td>Reports</td><td>Riportok</td></tr>
                <tr><td>/logs</td><td>Logs</td><td>Audit naplÃ³ (SA only)</td></tr>
                <tr><td>/settings</td><td>Settings</td><td>BeÃ¡llÃ­tÃ¡sok</td></tr>
                <tr><td>/companies</td><td>Companies</td><td>VÃ¡llalatok (SA only)</td></tr>
                <tr><td>/account-management</td><td>AccountManagement</td><td>FiÃ³kok kezelÃ©se</td></tr>
                <tr><td>/license-generator</td><td>LicenseGenerator</td><td>Licenc generÃ¡tor (SA only)</td></tr>
                <tr><td>*</td><td>NotFound</td><td>404 oldal</td></tr>
            </tbody>
        </table>

        <h3>9.2. Hookok (47 db)</h3>
        <table>
            <thead><tr><th>KategÃ³ria</th><th>Hookok</th></tr></thead>
            <tbody>
                <tr><td><strong>Auth</strong></td><td>useUserProfile, use2FA, useInactivityLogout, useAccountLock, useActiveSessions, useLockedAccounts, useLoginAttempts, useLoginAttemptsList</td></tr>
                <tr><td><strong>Data CRUD</strong></td><td>useCompanies, useUsers, usePartners, usePartnerContacts, useProjects, useSales, useContracts, useDocuments, useEvents, useTasks</td></tr>
                <tr><td><strong>Files</strong></td><td>useDocumentFiles, useContractFiles, useDocumentTemplates</td></tr>
                <tr><td><strong>Features</strong></td><td>useTimeTracking, useApprovalWorkflows, useAutomationRules, useAutomationLogs, useAutomationExecution, useNotifications, useFavorites, useTags, useComments</td></tr>
                <tr><td><strong>UI</strong></td><td>useColumnSettings, useDashboardWidgets, useBulkSelection, useBulkOperations, useSortableData, usePostalCodes</td></tr>
                <tr><td><strong>License</strong></td><td>useLicenseValidation, useLicenseEnforcement, useFeatureAccess, useReadOnlyMode, useCompanyLicenses</td></tr>
                <tr><td><strong>System</strong></td><td>useSystemSettings, useMasterData, useUserCompanies, useAppLogo, useApiKeyStatus, useDeadlineChecker, useUpdateTaskDeadline</td></tr>
                <tr><td><strong>Utility</strong></td><td>use-mobile, use-toast</td></tr>
            </tbody>
        </table>

        <h3>9.3. Layout Ã©s NavigÃ¡ciÃ³</h3>
        <ul>
            <li><strong>MainLayout:</strong> AppSidebar + TopBar wrapper</li>
            <li><strong>AppSidebar:</strong> Ã–sszecsukhatÃ³ navigÃ¡ciÃ³, toggle gomb <strong>kÃ¶telezÅ‘ funkciÃ³</strong></li>
            <li><strong>TopBar:</strong> VÃ¡llalat vÃ¡lasztÃ³ (bal), GlobalSearch (jobb), Ã‰rtesÃ­tÃ©sek, User menu, Nyelv vÃ¡lasztÃ³</li>
            <li><strong>Day/Night toggle:</strong> RegisztrÃ¡ciÃ³s oldalon is elÃ©rhetÅ‘</li>
        </ul>

        <h3>9.4. TÃ¡blÃ¡zat Rendszer</h3>
        <ul>
            <li><strong>ResizableTable:</strong> UniverzÃ¡lis tÃ¡blÃ¡zat komponens - minden listÃ¡nÃ¡l hasznÃ¡landÃ³</li>
            <li><strong>useColumnSettings hook:</strong> Oszlop lÃ¡thatÃ³sÃ¡g, sorrend, szÃ©lessÃ©g (localStorage)</li>
            <li><strong>ColumnSettingsPopover:</strong> Oszlop beÃ¡llÃ­tÃ¡sok UI</li>
            <li>Sticky header (top-0 z-10)</li>
            <li>Drag-drop oszlop rendezÃ©s</li>
            <li>Oszlop szÃ©lessÃ©g Ã¡llÃ­tÃ¡s hÃºzÃ¡ssal</li>
            <li>Kompakt padding (px-3 py-2)</li>
            <li>Dinamikus sormagassÃ¡g</li>
        </ul>
        
        <div class="info-box">
            <strong>IgazÃ­tÃ¡si szabÃ¡ly:</strong><br>
            â€¢ DÃ¡tumok, badge-ek, akciÃ³k, stÃ¡tuszok, szÃ¡mok â†’ <strong>kÃ¶zÃ©pre</strong><br>
            â€¢ Nevek, szÃ¶vegek, leÃ­rÃ¡sok â†’ <strong>balra</strong>
        </div>

        <h3>9.5. Form ValidÃ¡ciÃ³</h3>
        <ul>
            <li>KÃ¶telezÅ‘ mezÅ‘k: vÃ©kony piros keret + "KÃ¶telezÅ‘ mezÅ‘" hibaÃ¼zenet</li>
            <li>AdÃ³szÃ¡m: speciÃ¡lis magyar validÃ¡ciÃ³ (formÃ¡tum, ellenÅ‘rzÅ‘ szÃ¡mjegy, ÃFA kÃ³d, NAV kÃ³d)</li>
            <li>JelszÃ³: komplexitÃ¡si kÃ¶vetelmÃ©nyek megjelenÃ­tÃ©se</li>
            <li>MentÃ©s gomb tiltva Ã©rvÃ©nytelen form esetÃ©n</li>
        </ul>

        <h3>9.6. Branding</h3>
        <ul>
            <li>AlkalmazÃ¡s neve: <strong>PipeLiT</strong></li>
            <li>FeltÃ¶lthetÅ‘ logo (Settings > System)</li>
            <li>Storage: "branding" bucket</li>
            <li>MegjelenÃ©s: login, register, sidebar header</li>
            <li>Cache busting mechanizmus logo frissÃ­tÃ©shez</li>
        </ul>

        <h3>9.7. PÃ©nznem FormÃ¡zÃ¡s</h3>
        <ul>
            <li>HUF: 0 tizedesjegy (kerekÃ­tve)</li>
            <li>EUR/USD: 2 tizedesjegy</li>
            <li>PÃ©nzÃ¶sszeg oszlopok: <code>font-mono text-right</code></li>
            <li><code>formatCurrency()</code> utility a kÃ¶zponti formÃ¡zÃ¡shoz</li>
            <li>BeÃ¡llÃ­tÃ¡s: use_browser_locale vagy manuÃ¡lis separator config</li>
        </ul>

        <h3>9.8. i18n</h3>
        <ul>
            <li>TÃ¡mogatott nyelvek: Magyar (hu), English (en)</li>
            <li>Nyelvi fÃ¡jlok: src/locales/hu.json, src/locales/en.json</li>
            <li>TÃ¶rzsadat fordÃ­tÃ¡sok: masterdata-hu.json, masterdata-en.json</li>
            <li>LanguageSelector komponens TopBar-ban</li>
            <li>Nyelv mentÃ©se profiles.language + localStorage</li>
        </ul>
    </div>

    <!-- ==================== 10. NEM FUNKCIONÃLIS ==================== -->
    <div class="section" id="non-functional">
        <h2>10. NEM FUNKCIONÃLIS KÃ–VETELMÃ‰NYEK</h2>

        <h3>10.1. TeljesÃ­tmÃ©ny</h3>
        <ul>
            <li>Lazy loading minden oldalra (React.lazy + Suspense)</li>
            <li>TanStack Query cache: staleTime 5 perc, gcTime 30 perc</li>
            <li>refetchOnWindowFocus: false</li>
            <li>Skeleton loader fallback</li>
        </ul>

        <h3>10.2. BiztonsÃ¡g</h3>
        <ul>
            <li>RLS minden tÃ¡blÃ¡n (50+ policy)</li>
            <li>SECURITY DEFINER fÃ¼ggvÃ©nyek Ã©rzÃ©keny mÅ±veletekhez</li>
            <li>2FA tÃ¡mogatÃ¡s (TOTP + recovery codes)</li>
            <li>Account lockout brute force ellen</li>
            <li>Single session enforcement</li>
            <li>Password expiry (90 nap)</li>
            <li>Rate limiting (login attempts)</li>
            <li>Session termination broadcast</li>
        </ul>

        <h3>10.3. Audit Ã©s Logging</h3>
        <ul>
            <li>logs tÃ¡bla minden entitÃ¡s mÅ±velethez</li>
            <li>login_attempts minden bejelentkezÃ©si kÃ­sÃ©rlethez</li>
            <li>automation_logs automatizÃ¡ciÃ³ vÃ©grehajtÃ¡sokhoz</li>
            <li>Sensitive profile changes trigger (role, 2FA, permissions)</li>
            <li>Account lock events logging</li>
        </ul>

        <h3>10.4. SkÃ¡lÃ¡zhatÃ³sÃ¡g</h3>
        <ul>
            <li>Multi-tenant architektÃºra (company_id szeparÃ¡ciÃ³)</li>
            <li>Supabase managed infrastructure</li>
            <li>Edge functions stateless design</li>
        </ul>

        <h3>10.5. TÃ©ma Ã©s MegjelenÃ©s</h3>
        <ul>
            <li>Light/Dark mÃ³d tÃ¡mogatÃ¡s (next-themes)</li>
            <li>24 Ã³rÃ¡s idÅ‘formÃ¡tum alkalmazÃ¡s-szerte</li>
            <li>Responsive design (Tailwind breakpoints)</li>
            <li>Semantic color tokens (index.css)</li>
        </ul>
    </div>

    <!-- ==================== 11. ARCHITEKTÃšRÃLIS DÃ–NTÃ‰SEK ==================== -->
    <div class="section" id="architectural-decisions">
        <h2>11. ARCHITEKTÃšRÃLIS DÃ–NTÃ‰SEK</h2>

        <h3>11.1. Soft Delete SECURITY DEFINER Pattern</h3>
        <div class="decision-box">
            <strong>ProblÃ©ma:</strong> RLS UPDATE policy Ã©s SELECT policy Ã¼tkÃ¶zÃ©se (deleted_at IS NULL check).<br><br>
            <strong>MegoldÃ¡s:</strong> Minden major entitÃ¡shoz SECURITY DEFINER RPC function:
            <ul>
                <li><code>soft_delete_project()</code></li>
                <li><code>soft_delete_task()</code></li>
                <li><code>soft_delete_event()</code></li>
                <li><code>soft_delete_contract()</code></li>
                <li><code>soft_delete_comment()</code></li>
            </ul>
            Ezek bypass-oljÃ¡k az RLS-t Ã©s explicit jogosultsÃ¡g-ellenÅ‘rzÃ©st vÃ©geznek.
        </div>

        <h3>11.2. PDF Preview Blob URL</h3>
        <div class="decision-box">
            <strong>ProblÃ©ma:</strong> Supabase signed URL-ek iframe-ben Chrome CSP/X-Frame-Options blokkolÃ¡s.<br><br>
            <strong>MegoldÃ¡s:</strong> FÃ¡jl letÃ¶ltÃ©s â†’ <code>URL.createObjectURL(blob)</code> â†’ object tag-ben megjelenÃ­tÃ©s. Ez az application origin-rÅ‘l szolgÃ¡lja ki a PDF-et.
        </div>

        <h3>11.3. Real-time Session Termination</h3>
        <div class="decision-box">
            <strong>ProblÃ©ma:</strong> Admin Ã¡ltal kezdemÃ©nyezett kijelentkeztetÃ©s azonnali vÃ©grehajtÃ¡sa.<br><br>
            <strong>MegoldÃ¡s:</strong> Supabase Realtime broadcast a <code>session-terminate-${userId}</code> channelen. AuthContext figyeli Ã©s azonnal kijelentkezteti a usert.
        </div>

        <h3>11.4. Native HTML Date Input</h3>
        <div class="decision-box">
            <strong>ProblÃ©ma:</strong> Calendar library (react-day-picker) Deno/Edge Functions build hibÃ¡k.<br><br>
            <strong>MegoldÃ¡s:</strong> Native HTML <code>&lt;input type="date"&gt;</code> Ã©s <code>&lt;input type="datetime-local"&gt;</code> hasznÃ¡lata mindenhol.
        </div>

        <h3>11.5. Login Attempts Rate Limiting</h3>
        <div class="decision-box">
            <strong>ProblÃ©ma:</strong> DoS tÃ¡madÃ¡s login_attempts tÃ¡blÃ¡n keresztÃ¼l.<br><br>
            <strong>MegoldÃ¡s:</strong> <code>record_login_attempt()</code> SECURITY DEFINER RPC, ami max 10 sikertelen/perc/IP rate limit-et alkalmaz. Nincs kÃ¶zvetlen INSERT RLS policy.
        </div>

        <h3>11.6. Licenc Kulcs Non-determinizmus</h3>
        <div class="decision-box">
            <strong>ProblÃ©ma:</strong> Azonos input paramÃ©terek azonos licenc kulcsot generÃ¡lnak â†’ kulcs megoszthatÃ³sÃ¡g.<br><br>
            <strong>MegoldÃ¡s:</strong> 12-bit random nonce (4096 lehetsÃ©ges Ã©rtÃ©k) hozzÃ¡adÃ¡sa a licenc payload-hoz.
        </div>
    </div>

    <!-- ==================== 12. ROADMAP / BACKLOG ==================== -->
    <div class="section" id="backlog">
        <h2>12. ROADMAP / BACKLOG</h2>

        <h3>12.1. ImplementÃ¡lt (100%)</h3>
        <ul class="feature-list">
            <li class="done">Phase 1: Bulk operations, Favorites, Tags</li>
            <li class="done">Phase 2: Comments, Recurring tasks/events, Partner contacts</li>
            <li class="done">Phase 3: Reports, CSV/Excel import, Document templates</li>
            <li class="done">Phase 4: Kanban, Gantt, Dashboard customization, Time tracking, Approval workflows, Automation</li>
        </ul>

        <h3>12.2. Tervezett / Backlog</h3>
        <ul class="feature-list">
            <li class="missing">Email integrÃ¡ciÃ³ (IMAP/SMTP kÃ¶zvetlen - Deno korlÃ¡tozÃ¡s miatt elhalasztva)</li>
            <li class="missing">NAV integrÃ¡ciÃ³ (adÃ³szÃ¡m ellenÅ‘rzÃ©s API)</li>
            <li class="missing">SzÃ¡mlÃ¡zÃ³ rendszer integrÃ¡ciÃ³</li>
            <li class="missing">Publikus API (third-party integrations)</li>
            <li class="missing">Mobile app (React Native)</li>
            <li class="missing">Advanced analytics / BI dashboard</li>
            <li class="missing">Workflow designer (vizuÃ¡lis flow builder)</li>
            <li class="missing">AI-alapÃº feladat priorizÃ¡lÃ¡s</li>
        </ul>

        <h3>12.3. Ismert KorlÃ¡tozÃ¡sok</h3>
        <ul>
            <li>Office formÃ¡tumok (Word/Excel/PowerPoint) preview nem tÃ¡mogatott - bÃ¶ngÃ©szÅ‘ben nem megbÃ­zhatÃ³</li>
            <li>Direct SMTP nem lehetsÃ©ges Edge Functions-ben (Deno runtime korlÃ¡tozÃ¡s) - Resend HTTP API hasznÃ¡latos</li>
            <li>Anya-leÃ¡nyvÃ¡llalat kapcsolat funkciÃ³ eltÃ¡volÃ­tva user dÃ¶ntÃ©s alapjÃ¡n</li>
        </ul>
    </div>

    <!-- ==================== FOOTER ==================== -->
    <div class="info-box" style="margin-top: 50px;">
        <strong>Dokumentum vÃ©ge</strong><br>
        PipeLiT - Teljes Rendszer SpecifikÃ¡ciÃ³ v3.0<br>
        GenerÃ¡lva: 2025-12-08<br>
        Ez a dokumentum a kÃ³dbÃ¡zis Ã©s a teljes Lovable beszÃ©lgetÃ©s alapjÃ¡n kÃ©szÃ¼lt.
    </div>

</body>
</html>
